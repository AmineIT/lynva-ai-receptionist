import{r as Dr,a as Br,b as Mr,g as Fr}from"./vendor-DyFf35aq.js";import{r as x,u as ct,L as H,a as qr,B as zr,R as Wr,b as J,N as Gr}from"./router-rMeYLD69.js";import{B as Te,A as Hr,C as re,M as Qe,a as qt,b as ze,c as Ws,E as Ct,d as Oe,X as Vr,L as Jr,P as Y,U as Gs,S as Kr,e as Hs,f as Qr,g as Yr,D as dt,T as We,h as Je,i as Ye,j as Xr,k as Vs,l as zt,m as Zr,n as Wt,o as Js,p as as,q as en,r as tn,s as sn,t as rn,u as is}from"./ui-f0f34lq7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var yt={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os;function nn(){if(os)return De;os=1;var n=Dr(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,f={},h=null,m=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(m=c.ref);for(d in c)r.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:l,key:h,ref:m,props:f,_owner:a.current}}return De.Fragment=t,De.jsx=o,De.jsxs=o,De}var ls;function an(){return ls||(ls=1,yt.exports=nn()),yt.exports}var s=an(),st={},cs;function on(){if(cs)return st;cs=1;var n=Br();return st.createRoot=n.createRoot,st.hydrateRoot=n.hydrateRoot,st}var ln=on();const cn="modulepreload",dn=function(n,e){return new URL(n,e).href},ds={},Xe=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(t.map(u=>{if(u=dn(u,r),u in ds)return;ds[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let g=o.length-1;g>=0;g--){const p=o[g];if(p.href===u&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":cn,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,p)=>{m.addEventListener("load",g),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},un=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Xe(async()=>{const{default:r}=await Promise.resolve().then(()=>$e);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Gt extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class hn extends Gt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class us extends Gt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hs extends Gt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var At;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(At||(At={}));var fn=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class mn{constructor(e,{headers:t={},customFetch:r,region:a=At.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=un(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return fn(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new hn(p)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new us(f);if(!f.ok)throw new hs(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield f.json():m==="application/octet-stream"?g=yield f.blob():m==="text/event-stream"?g=f:m==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof hs||a instanceof us?a.context:void 0}}})}}var q={},ve={},be={},we={},je={},_e={},gn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ie=gn();const pn=Ie.fetch,Ks=Ie.fetch.bind(Ie),Qs=Ie.Headers,xn=Ie.Request,yn=Ie.Response,$e=Object.freeze(Object.defineProperty({__proto__:null,Headers:Qs,Request:xn,Response:yn,default:Ks,fetch:pn},Symbol.toStringTag,{value:"Module"})),vn=Mr($e);var rt={},fs;function Ys(){if(fs)return rt;fs=1,Object.defineProperty(rt,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return rt.default=n,rt}var ms;function Xs(){if(ms)return _e;ms=1;var n=_e&&_e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_e,"__esModule",{value:!0});const e=n(vn),t=n(Ys());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h;let m=null,g=null,p=null,y=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const T=await u.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=T:g=JSON.parse(T))}const v=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),N=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&N&&N.length>1&&(p=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,y=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const v=await u.text();try{m=JSON.parse(v),Array.isArray(m)&&u.status===404&&(g=[],m=null,y=200,b="OK")}catch{u.status===404&&v===""?(y=204,b="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,y=200,b="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:p,status:y,statusText:b}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return _e.default=r,_e}var gs;function Zs(){if(gs)return je;gs=1;var n=je&&je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(je,"__esModule",{value:!0});const e=n(Xs());class t extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`,u==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return je.default=t,je}var ps;function Ht(){if(ps)return we;ps=1;var n=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(we,"__esModule",{value:!0});const e=n(Zs());class t extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${c}fts${u}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return we.default=t,we}var xs;function er(){if(xs)return be;xs=1;var n=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});const e=n(Ht());class t{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=i,this.schema=o,this.fetch=l}select(a,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let c=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:o=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){const u="POST",d=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),l&&d.push(`count=${l}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",o=[];return a&&o.push(`count=${a}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return be.default=t,be}var Be={},Me={},ys;function bn(){return ys||(ys=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.version=void 0,Me.version="0.0.0-automated"),Me}var vs;function wn(){if(vs)return Be;vs=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.DEFAULT_HEADERS=void 0;const n=bn();return Be.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Be}var bs;function jn(){if(bs)return ve;bs=1;var n=ve&&ve.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ve,"__esModule",{value:!0});const e=n(er()),t=n(Ht()),r=wn();class a{constructor(o,{headers:l={},schema:c,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=u}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new a(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:c=!1,get:u=!1,count:d}={}){let f;const h=new URL(`${this.url}/rpc/${o}`);let m;c||u?(f=c?"HEAD":"GET",Object.entries(l).filter(([p,y])=>y!==void 0).map(([p,y])=>[p,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([p,y])=>{h.searchParams.append(p,y)})):(f="POST",m=l);const g=Object.assign({},this.headers);return d&&(g.Prefer=`count=${d}`),new t.default({method:f,url:h,headers:g,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return ve.default=a,ve}var ws;function _n(){if(ws)return q;ws=1;var n=q&&q.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(q,"__esModule",{value:!0}),q.PostgrestError=q.PostgrestBuilder=q.PostgrestTransformBuilder=q.PostgrestFilterBuilder=q.PostgrestQueryBuilder=q.PostgrestClient=void 0;const e=n(jn());q.PostgrestClient=e.default;const t=n(er());q.PostgrestQueryBuilder=t.default;const r=n(Ht());q.PostgrestFilterBuilder=r.default;const a=n(Zs());q.PostgrestTransformBuilder=a.default;const i=n(Xs());q.PostgrestBuilder=i.default;const o=n(Ys());return q.PostgrestError=o.default,q.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},q}var Nn=_n();const kn=Fr(Nn),{PostgrestClient:Sn,PostgrestQueryBuilder:Lo,PostgrestFilterBuilder:Uo,PostgrestTransformBuilder:Do,PostgrestBuilder:Bo,PostgrestError:Mo}=kn;function Cn(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const An=Cn(),En="2.11.15",Pn=`realtime-js/${En}`,Tn="1.0.0",tr=1e4,Rn=1e3;var He;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(He||(He={}));var W;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(W||(W={}));var Q;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Q||(Q={}));var Et;(function(n){n.websocket="websocket"})(Et||(Et={}));var xe;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xe||(xe={}));class On{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const a=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+a));o=o+a;const c=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class sr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($||($={}));const js=(n,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=In(o,n,e,a),i),{})},In=(n,e,t,r)=>{const a=e.find(l=>l.name===n),i=a==null?void 0:a.type,o=t[n];return i&&!r.includes(i)?rr(i,o):Pt(o)},rr=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Dn(e,t)}switch(n){case $.bool:return $n(e);case $.float4:case $.float8:case $.int2:case $.int4:case $.int8:case $.numeric:case $.oid:return Ln(e);case $.json:case $.jsonb:return Un(e);case $.timestamp:return Bn(e);case $.abstime:case $.date:case $.daterange:case $.int4range:case $.int8range:case $.money:case $.reltime:case $.text:case $.time:case $.timestamptz:case $.timetz:case $.tsrange:case $.tstzrange:return Pt(e);default:return Pt(e)}},Pt=n=>n,$n=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ln=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Un=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Dn=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>rr(e,l))}return n},Bn=n=>typeof n=="string"?n.replace(" ","T"):n,nr=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class vt{constructor(e,t,r={},a=tr){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _s;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(_s||(_s={}));class Ve{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ve.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Ve.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ve.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),g=d.filter(y=>m.indexOf(y.presence_ref)<0),p=f.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(e,t,r,a){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);e[l].unshift(...h)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,a(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ns;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Ns||(Ns={}));var ks;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ks||(ks={}));var te;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(te||(te={}));class Vt{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=W.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new vt(this,Q.join,this.params,this.timeout),this.rejoinTimer=new sr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=W.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Q.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Ve(this),this.broadcastEndpointURL=nr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==W.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(te.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(te.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(te.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let p=0;p<m;p++){const y=h[p],{filter:{event:b,schema:P,table:v,filter:N}}=y,T=d&&d[p];if(T&&T.event===b&&T.schema===P&&T.table===v&&T.filter===N)g.push(Object.assign(Object.assign({},y),{id:T.id}));else{this.unsubscribe(),this.state=W.errored,e==null||e(te.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(te.SUBSCRIBED);return}}).receive("error",d=>{this.state=W.errored,e==null||e(te.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(te.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=W.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Q.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new vt(this,Q.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new vt(this,e,t,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Q;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,y;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(p=m.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,y,b,P,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,T=(g=m.filter)===null||g===void 0?void 0:g.event;return N&&((p=t.ids)===null||p===void 0?void 0:p.includes(N))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const N=(P=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return N==="*"||N===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:y,commit_timestamp:b,type:P,errors:v}=g;h=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:b,eventType:P,new:{},old:{},errors:v}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===W.closed}_isJoined(){return this.state===W.joined}_isJoining(){return this.state===W.joining}_isLeaving(){return this.state===W.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),i={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Vt.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Q.close,{},e)}_onError(e){this._on(Q.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=js(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=js(e.columns,e.old_record)),t}}const Ss=()=>{},Mn=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fn{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tr,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ss,this.ref=0,this.logger=Ss,this.conn=null,this.sendBuffer=[],this.serializer=new On,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Xe(async()=>{const{default:c}=await Promise.resolve().then(()=>$e);return{default:c}},void 0,import.meta.url).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Et.websocket}`,this.httpEndpoint=nr(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=An),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tn}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case He.connecting:return xe.Connecting;case He.open:return xe.Open;case He.closing:return xe.Closing;default:return xe.Closed}}isConnected(){return this.connectionState()===xe.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new Vt(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:Pn};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Q.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Rn,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:a,payload:i,ref:o}=t;r==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Q.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Mn],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Jt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function z(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class qn extends Jt{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tt extends Jt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var zn=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const ar=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Xe(async()=>{const{default:r}=await Promise.resolve().then(()=>$e);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Wn=()=>zn(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xe(()=>Promise.resolve().then(()=>$e),void 0,import.meta.url)).Response:Response}),Rt=n=>{if(Array.isArray(n))return n.map(t=>Rt(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Rt(r)}),e},Gn=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var ye=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const bt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Hn=(n,e,t)=>ye(void 0,void 0,void 0,function*(){const r=yield Wn();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(a=>{const i=n.status||500,o=(a==null?void 0:a.statusCode)||i+"";e(new qn(bt(a),i,o))}).catch(a=>{e(new Tt(bt(a),a))}):e(new Tt(bt(n),n))}),Vn=(n,e,t,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?a:(Gn(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),t))};function Ze(n,e,t,r,a,i){return ye(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,Vn(e,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Hn(c,l,r))})})}function ot(n,e,t,r){return ye(this,void 0,void 0,function*(){return Ze(n,"GET",e,t,r)})}function se(n,e,t,r,a){return ye(this,void 0,void 0,function*(){return Ze(n,"POST",e,r,a,t)})}function Ot(n,e,t,r,a){return ye(this,void 0,void 0,function*(){return Ze(n,"PUT",e,r,a,t)})}function Jn(n,e,t,r){return ye(this,void 0,void 0,function*(){return Ze(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function ir(n,e,t,r,a){return ye(this,void 0,void 0,function*(){return Ze(n,"DELETE",e,r,a,t)})}var G=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const Kn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qn{constructor(e,t={},r,a){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ar(a)}uploadOrUpdate(e,t,r,a){return G(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cs),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),f=yield(e=="PUT"?Ot:se)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(z(i))return{data:null,error:i};throw i}})}upload(e,t,r){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return G(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:Cs.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Ot(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(z(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return G(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=yield se(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Jt("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}})}update(e,t,r){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return G(this,void 0,void 0,function*(){try{return{data:yield se(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(z(a))return{data:null,error:a};throw a}})}copy(e,t,r){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield se(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(z(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return G(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield se(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(z(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return G(this,void 0,void 0,function*(){try{const a=yield se(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(z(a))return{data:null,error:a};throw a}})}download(e,t){return G(this,void 0,void 0,function*(){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ot(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(z(l))return{data:null,error:l};throw l}})}info(e){return G(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ot(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Rt(r),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}})}exists(e){return G(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Jn(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(z(r)&&r instanceof Tt){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&a.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return G(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}})}list(e,t,r){return G(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Kn),t),{prefix:e||""});return{data:yield se(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(z(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Yn="2.10.4",Xn={"X-Client-Info":`storage-js/${Yn}`};var Ne=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class Zn{constructor(e,t={},r,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Xn),t),this.fetch=ar(r)}listBuckets(){return Ne(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(z(e))return{data:null,error:e};throw e}})}getBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ne(this,void 0,void 0,function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}})}}class ea extends Zn{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new Qn(this.url,this.headers,e,this.fetch)}}const ta="2.53.0";let Ge="";typeof Deno<"u"?Ge="deno":typeof document<"u"?Ge="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ge="react-native":Ge="node";const sa={"X-Client-Info":`supabase-js-${Ge}/${ta}`},ra={headers:sa},na={schema:"public"},aa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ia={};var oa=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};const la=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ks:e=fetch,(...t)=>e(...t)},ca=()=>typeof Headers>"u"?Qs:Headers,da=(n,e,t)=>{const r=la(t),a=ca();return(i,o)=>oa(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var ua=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};function ha(n){return n.endsWith("/")?n:n+"/"}function fa(n,e){var t,r;const{db:a,auth:i,realtime:o,global:l}=n,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ua(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}const or="2.71.1",Ee=30*1e3,It=3,wt=It*Ee,ma="http://localhost:9999",ga="supabase.auth.token",pa={"X-Client-Info":`gotrue-js/${or}`},$t="X-Supabase-Api-Version",lr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xa=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ya=10*60*1e3;class Kt extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function A(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class va extends Kt{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function ba(n){return A(n)&&n.name==="AuthApiError"}class cr extends Kt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class fe extends Kt{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class le extends fe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wa(n){return A(n)&&n.name==="AuthSessionMissingError"}class nt extends fe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class at extends fe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class it extends fe{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ja(n){return A(n)&&n.name==="AuthImplicitGrantRedirectError"}class As extends fe{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lt extends fe{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function jt(n){return A(n)&&n.name==="AuthRetryableFetchError"}class Es extends fe{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ut extends fe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ps=` 	
\r=`.split(""),_a=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ps.length;e+=1)n[Ps[e].charCodeAt(0)]=-2;for(let e=0;e<lt.length;e+=1)n[lt[e].charCodeAt(0)]=e;return n})();function Ts(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(lt[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(lt[r]),e.queuedBits-=6}}function dr(n,e,t){const r=_a[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Rs(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Sa(o,r,t)};for(let o=0;o<n.length;o+=1)dr(n.charCodeAt(o),a,i);return e.join("")}function Na(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function ka(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Na(r,e)}}function Sa(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ca(n){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)dr(n.charCodeAt(a),t,r);return new Uint8Array(e)}function Aa(n){const e=[];return ka(n,t=>e.push(t)),new Uint8Array(e)}function Ea(n){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return n.forEach(a=>Ts(a,t,r)),Ts(null,t,r),e.join("")}function Pa(n){return Math.round(Date.now()/1e3)+n}function Ta(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const K=()=>typeof window<"u"&&typeof document<"u",me={tested:!1,writable:!1},ur=()=>{if(!K())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(me.tested)return me.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),me.tested=!0,me.writable=!0}catch{me.tested=!0,me.writable=!1}return me.writable};function Ra(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const hr=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Xe(async()=>{const{default:r}=await Promise.resolve().then(()=>$e);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Oa=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Pe=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ge=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ne=async(n,e)=>{await n.removeItem(e)};class ut{constructor(){this.promise=new ut.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ut.promiseConstructor=Promise;function _t(n){const e=n.split(".");if(e.length!==3)throw new Ut("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!xa.test(e[r]))throw new Ut("JWT not in base64url format");return{header:JSON.parse(Rs(e[0])),payload:JSON.parse(Rs(e[1])),signature:Ca(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ia(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function $a(n,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function La(n){return("0"+n.toString(16)).substr(-2)}function Ua(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let i=0;i<56;i++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,La).join("")}async function Da(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Ba(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Da(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ke(n,e,t=!1){const r=Ua();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await Pe(n,`${e}-code-verifier`,a);const i=await Ba(r);return[i,r===i?"plain":"s256"]}const Ma=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fa(n){const e=n.headers.get($t);if(!e||!e.match(Ma))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function qa(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function za(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wa=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Se(n){if(!Wa.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nt(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Os(n){return JSON.parse(JSON.stringify(n))}var Ga=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t};const pe=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ha=[502,503,504];async function Is(n){var e;if(!Oa(n))throw new Lt(pe(n),0);if(Ha.includes(n.status))throw new Lt(pe(n),n.status);let t;try{t=await n.json()}catch(i){throw new cr(pe(i),i)}let r;const a=Fa(n);if(a&&a.getTime()>=lr["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Es(pe(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new le}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Es(pe(t),n.status,t.weak_password.reasons);throw new va(pe(t),n.status||500,r)}const Va=(n,e,t,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function R(n,e,t,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[$t]||(i[$t]=lr["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ja(n,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Ja(n,e,t,r,a,i){const o=Va(e,r,a,i);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Lt(pe(c),0)}if(l.ok||await Is(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Is(c)}}function ee(n){var e;let t=null;Xa(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Pa(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function $s(n){const e=ee(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function he(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ka(n){return{data:n,error:null}}function Qa(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:i}=n,o=Ga(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ya(n){return n}function Xa(n){return n.access_token&&n.refresh_token&&n.expires_in}const kt=["global","local","others"];var Za=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t};class ei{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=hr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=kt[0]){if(kt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kt.join(", ")}`);try{return await R(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await R(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:he})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Za(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Qa,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await R(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:he})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ya});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Se(e);try{return await R(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:he})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Se(e);try{return await R(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:he})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Se(e);try{return await R(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:he})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Se(e.userId);try{const{data:t,error:r}=await R(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Se(e.userId),Se(e.id);try{return{data:await R(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}function Ls(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function ti(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ce={debug:!!(globalThis&&ur()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class si extends fr{}async function ri(n,e,t){Ce.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ce.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Ce.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Ce.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Ce.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new si(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ce.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ti();const ni={url:ma,storageKey:ga,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pa,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Us(n,e,t){return await t()}const Ae={};class Ke{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ke.nextInstanceID,Ke.nextInstanceID+=1,this.instanceID>0&&K()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},ni),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ei({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=hr(a.fetch),this.lock=a.lock||Us,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:K()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ri:this.lock=Us,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ur()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ls(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ls(this.memoryStorage)),K()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Ae[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ae[this.storageKey]=Object.assign(Object.assign({},Ae[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ae[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ae[this.storageKey]=Object.assign(Object.assign({},Ae[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${or}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ra(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),K()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ja(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new cr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ee}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,a;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ke(this.storage,this.storageKey)),i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:ee})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ee})}else throw new at("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$s})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$s})}else throw new at("You must provide either an email or phone number and a password");const{data:r,error:a}=t;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new nt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,a,i,o,l,c,u,d,f,h,m;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:y,wallet:b,statement:P,options:v}=e;let N;if(K())if(typeof b=="object")N=b;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))N=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const T=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const O=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),P?{statement:P}:null));let F;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")F=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)F=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)g=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),p=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(a=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const O=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=O}}try{const{data:y,error:b}=await R(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Ea(p)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ee});if(b)throw b;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new nt}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:b})}catch(y){if(A(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await ge(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:i,error:o}=await R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ee});if(await ne(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new nt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(A(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:i,nonce:o}=e,l=await R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ee}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new nt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ke(this.storage,this.storageKey));const{error:f}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new at("You must provide either an email or phone number.")}catch(l){if(A(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let a,i;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ee});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ke(this.storage,this.storageKey)),await R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ka})}catch(i){if(A(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new le;const{error:a}=await R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:o}=await R(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:o,error:l}=await R(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new at("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ge(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ge(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Nt()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:he}):await this._useSession(async t=>{var r,a,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new le}:await R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:he})})}catch(t){if(A(t))return wa(t)&&(await this._removeSession(),await ne(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new le;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ke(this.storage,this.storageKey));const{data:u,error:d}=await R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:he});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new le;const t=Date.now()/1e3;let r=t,a=!0,i=null;const{payload:o}=_t(e.access_token);if(o.exp&&(r=o.exp,a=r<=t),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new le;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!K())throw new it("No browser detected.");if(e.error||e.error_description||e.error_code)throw new it(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new As("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new it("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new As("No code detected.");const{data:P,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new it("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Ee&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(A(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ge(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:i}=t;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(ba(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ne(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ta(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await ke(this.storage,this.storageKey,!0));try{return await R(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(A(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await R(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return K()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(A(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:i,error:o}=t;if(o)throw o;return await R(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await $a(async a=>(a>0&&await Ia(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ee})),(a,i)=>{const o=200*Math.pow(2,a);return i&&jt(i)&&Date.now()+o-r<Ee})}catch(r){if(this._debug(t,"error",r),A(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),K()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ge(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ge(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Pe(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Nt()}else if(a&&!a.user&&!a.user){const o=await ge(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await ne(this.storage,this.storageKey+"-user"),await Pe(this.storage,this.storageKey,a)):a.user=Nt()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<wt;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${wt}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),jt(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ut;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new le;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),A(i)){const o={session:null,error:i};return jt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Pe(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const i=Os(a);await Pe(this.storage,this.storageKey,i)}else{const a=Os(t);await Pe(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ne(this.storage,this.storageKey),await ne(this.storage,this.storageKey+"-code-verifier"),await ne(this.storage,this.storageKey+"-user"),this.userStorage&&await ne(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&K()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ee);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Ee);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ee}ms, refresh threshold is ${It} ticks`),a<=It&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fr)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!K()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ke(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;return i?{data:null,error:i}:await R(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await R(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;return i?{data:null,error:i}:await R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_t(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(t=a.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+ya>a)return r;const{data:i,error:o}=await R(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=_t(r);t!=null&&t.allowExpired||qa(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=za(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,Aa(`${l}.${c}`)))throw new Ut("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}}Ke.nextInstanceID=0;const ai=Ke;class ii extends ai{constructor(e){super(e)}}var oi=function(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(n,e||[])).next())})};class li{constructor(e,t,r){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=ha(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:na,realtime:ia,auth:Object.assign(Object.assign({},aa),{storageKey:u}),global:ra},f=fa(r??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=da(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Sn(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new ea(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new mn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return oi(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ii({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ci=(n,e,t)=>new li(n,e,t);function di(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const n=process.version.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}di()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ui="https://hcdkdshkkvgejpgnijtd.supabase.co",hi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjZGtkc2hra3ZnZWpwZ25panRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMjc5MTQsImV4cCI6MjA2OTgwMzkxNH0.kaokWRVLfVViERs-79fEBtQ3tHKlHn5U5MD_F-5iWqs",M=ci(ui,hi),mr=x.createContext(void 0);function fi({children:n}){const[e,t]=x.useState(null),[r,a]=x.useState(!0);x.useEffect(()=>{(async()=>{a(!0);try{const{data:{user:h}}=await M.auth.getUser();t(h)}catch(h){console.error("Error getting user:",h)}finally{a(!1)}})();const{data:{subscription:f}}=M.auth.onAuthStateChange((h,m)=>{t((m==null?void 0:m.user)||null),a(!1)});return()=>f.unsubscribe()},[]);const u={user:e,loading:r,signIn:async(d,f)=>{const{data:h,error:m}=await M.auth.signInWithPassword({email:d,password:f});if(m)throw m;return h},signUp:async(d,f)=>{const{data:h,error:m}=await M.auth.signUp({email:d,password:f,options:{emailRedirectTo:`${window.location.protocol}//${window.location.host}/auth/callback`}});if(m)throw m;return h},signOut:async()=>{const{error:d}=await M.auth.signOut();if(d)throw d},resetPassword:async d=>{const{error:f}=await M.auth.resetPasswordForEmail(d,{redirectTo:`${window.location.protocol}//${window.location.host}/auth/reset-password`});if(f)throw f}};return s.jsx(mr.Provider,{value:u,children:n})}function ht(){const n=x.useContext(mr);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function Ds(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function gr(...n){return e=>{let t=!1;const r=n.map(a=>{const i=Ds(a,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():Ds(n[a],null)}}}}function mi(...n){return x.useCallback(gr(...n),n)}function pr(n){const e=pi(n),t=x.forwardRef((r,a)=>{const{children:i,...o}=r,l=x.Children.toArray(i),c=l.find(yi);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return s.jsx(e,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return s.jsx(e,{...o,ref:a,children:i})});return t.displayName=`${n}.Slot`,t}var gi=pr("Slot");function pi(n){const e=x.forwardRef((t,r)=>{const{children:a,...i}=t;if(x.isValidElement(a)){const o=bi(a),l=vi(i,a.props);return a.type!==x.Fragment&&(l.ref=r?gr(r,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var xi=Symbol("radix.slottable");function yi(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===xi}function vi(n,e){const t={...e};for(const r in e){const a=n[r],i=e[r];/^on[A-Z]/.test(r)?a&&i?t[r]=(...l)=>{i(...l),a(...l)}:a&&(t[r]=a):r==="style"?t[r]={...a,...i}:r==="className"&&(t[r]=[a,i].filter(Boolean).join(" "))}return{...n,...t}}function bi(n){var r,a;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(a=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function xr(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=xr(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function yr(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=xr(n))&&(r&&(r+=" "),r+=e);return r}const Bs=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Ms=yr,Qt=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Ms(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(u=>{const d=t==null?void 0:t[u],f=i==null?void 0:i[u];if(d===null)return null;const h=Bs(d)||Bs(f);return a[u][h]}),l=t&&Object.entries(t).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,y]=g;return Array.isArray(y)?y.includes({...i,...l}[p]):{...i,...l}[p]===y})?[...u,f,h]:u},[]);return Ms(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},Yt="-",wi=n=>{const e=_i(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const l=o.split(Yt);return l[0]===""&&l.length!==1&&l.shift(),vr(l,e)||ji(o)},getConflictingClassGroupIds:(o,l)=>{const c=t[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},vr=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),a=r?vr(n.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const i=n.join(Yt);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Fs=/^\[(.+)\]$/,ji=n=>{if(Fs.test(n)){const e=Fs.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},_i=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return ki(Object.entries(n.classGroups),t).forEach(([i,o])=>{Dt(o,r,i,e)}),r},Dt=(n,e,t,r)=>{n.forEach(a=>{if(typeof a=="string"){const i=a===""?e:qs(e,a);i.classGroupId=t;return}if(typeof a=="function"){if(Ni(a)){Dt(a(r),e,t,r);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([i,o])=>{Dt(o,qs(e,i),t,r)})})},qs=(n,e)=>{let t=n;return e.split(Yt).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Ni=n=>n.isThemeGetter,ki=(n,e)=>e?n.map(([t,r])=>{const a=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,a]}):n,Si=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const a=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){t.has(i)?t.set(i,o):a(i,o)}}},br="!",Ci=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,a=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let y=0;y<l.length;y++){let b=l[y];if(u===0){if(b===a&&(r||l.slice(y,y+i)===e)){c.push(l.slice(d,y)),d=y+i;continue}if(b==="/"){f=y;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(br),g=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return t?l=>t({className:l,parseClassName:o}):o},Ai=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Ei=n=>({cache:Si(n.cacheSize),parseClassName:Ci(n),...wi(n)}),Pi=/\s+/,Ti=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a}=e,i=[],o=n.trim().split(Pi);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=t(u);let g=!!m,p=r(g?h.substring(0,m):h);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=r(h),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=Ai(d).join(":"),b=f?y+br:y,P=b+p;if(i.includes(P))continue;i.push(P);const v=a(p,g);for(let N=0;N<v.length;++N){const T=v[N];i.push(b+T)}l=u+(l.length>0?" "+l:l)}return l};function Ri(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=wr(e))&&(r&&(r+=" "),r+=t);return r}const wr=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=wr(n[r]))&&(t&&(t+=" "),t+=e);return t};function Oi(n,...e){let t,r,a,i=o;function o(c){const u=e.reduce((d,f)=>f(d),n());return t=Ei(u),r=t.cache.get,a=t.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Ti(c,t);return a(c,d),d}return function(){return i(Ri.apply(null,arguments))}}const L=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},jr=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ii=/^\d+\/\d+$/,$i=new Set(["px","full","screen"]),Li=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ui=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Di=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Mi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Z=n=>Re(n)||$i.has(n)||Ii.test(n),ae=n=>Le(n,"length",Ji),Re=n=>!!n&&!Number.isNaN(Number(n)),St=n=>Le(n,"number",Re),Fe=n=>!!n&&Number.isInteger(Number(n)),Fi=n=>n.endsWith("%")&&Re(n.slice(0,-1)),E=n=>jr.test(n),ie=n=>Li.test(n),qi=new Set(["length","size","percentage"]),zi=n=>Le(n,qi,_r),Wi=n=>Le(n,"position",_r),Gi=new Set(["image","url"]),Hi=n=>Le(n,Gi,Qi),Vi=n=>Le(n,"",Ki),qe=()=>!0,Le=(n,e,t)=>{const r=jr.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Ji=n=>Ui.test(n)&&!Di.test(n),_r=()=>!1,Ki=n=>Bi.test(n),Qi=n=>Mi.test(n),Yi=()=>{const n=L("colors"),e=L("spacing"),t=L("blur"),r=L("brightness"),a=L("borderColor"),i=L("borderRadius"),o=L("borderSpacing"),l=L("borderWidth"),c=L("contrast"),u=L("grayscale"),d=L("hueRotate"),f=L("invert"),h=L("gap"),m=L("gradientColorStops"),g=L("gradientColorStopPositions"),p=L("inset"),y=L("margin"),b=L("opacity"),P=L("padding"),v=L("saturate"),N=L("scale"),T=L("sepia"),O=L("skew"),F=L("space"),es=L("translate"),mt=()=>["auto","contain","none"],gt=()=>["auto","hidden","clip","visible","scroll"],pt=()=>["auto",E,e],U=()=>[E,e],ts=()=>["",Z,ae],et=()=>["auto",Re,E],ss=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],tt=()=>["solid","dashed","dotted","double","none"],rs=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],xt=()=>["start","end","center","between","around","evenly","stretch"],Ue=()=>["","0",E],ns=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Re,E];return{cacheSize:500,separator:":",theme:{colors:[qe],spacing:[Z,ae],blur:["none","",ie,E],brightness:X(),borderColor:[n],borderRadius:["none","","full",ie,E],borderSpacing:U(),borderWidth:ts(),contrast:X(),grayscale:Ue(),hueRotate:X(),invert:Ue(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[Fi,ae],inset:pt(),margin:pt(),opacity:X(),padding:U(),saturate:X(),scale:X(),sepia:Ue(),skew:X(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",E]}],container:["container"],columns:[{columns:[ie]}],"break-after":[{"break-after":ns()}],"break-before":[{"break-before":ns()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ss(),E]}],overflow:[{overflow:gt()}],"overflow-x":[{"overflow-x":gt()}],"overflow-y":[{"overflow-y":gt()}],overscroll:[{overscroll:mt()}],"overscroll-x":[{"overscroll-x":mt()}],"overscroll-y":[{"overscroll-y":mt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fe,E]}],basis:[{basis:pt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",E]}],grow:[{grow:Ue()}],shrink:[{shrink:Ue()}],order:[{order:["first","last","none",Fe,E]}],"grid-cols":[{"grid-cols":[qe]}],"col-start-end":[{col:["auto",{span:["full",Fe,E]},E]}],"col-start":[{"col-start":et()}],"col-end":[{"col-end":et()}],"grid-rows":[{"grid-rows":[qe]}],"row-start-end":[{row:["auto",{span:[Fe,E]},E]}],"row-start":[{"row-start":et()}],"row-end":[{"row-end":et()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",E]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",E]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...xt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...xt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...xt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",E,e]}],"min-w":[{"min-w":[E,e,"min","max","fit"]}],"max-w":[{"max-w":[E,e,"none","full","min","max","fit","prose",{screen:[ie]},ie]}],h:[{h:[E,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[E,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[E,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[E,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ie,ae]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",St]}],"font-family":[{font:[qe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",E]}],"line-clamp":[{"line-clamp":["none",Re,St]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Z,E]}],"list-image":[{"list-image":["none",E]}],"list-style-type":[{list:["none","disc","decimal",E]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...tt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Z,ae]}],"underline-offset":[{"underline-offset":["auto",Z,E]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",E]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",E]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ss(),Wi]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zi]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Hi]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...tt(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:tt()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...tt()]}],"outline-offset":[{"outline-offset":[Z,E]}],"outline-w":[{outline:[Z,ae]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ts()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Z,ae]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ie,Vi]}],"shadow-color":[{shadow:[qe]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...rs(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":rs()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ie,E]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",E]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",E]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",E]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Fe,E]}],"translate-x":[{"translate-x":[es]}],"translate-y":[{"translate-y":[es]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",E]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",E]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",E]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Z,ae,St]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Xi=Oi(Yi);function D(...n){return Xi(yr(n))}function Bt(n){return new Intl.DateTimeFormat("en-AE",{dateStyle:"medium",timeZone:"Asia/Dubai"}).format(new Date(n))}function Nr(n){const[e,t]=n.split(":"),r=new Date;return r.setHours(parseInt(e),parseInt(t)),new Intl.DateTimeFormat("en-AE",{timeStyle:"short",timeZone:"Asia/Dubai"}).format(r)}function Mt(n,e="AED"){return new Intl.NumberFormat("en-AE",{style:"currency",currency:e}).format(n)}function Zi(n){const e=n.replace(/\D/g,"");return e.startsWith("971")?`+${e.slice(0,3)} ${e.slice(3,5)} ${e.slice(5,8)} ${e.slice(8)}`:e.startsWith("0")&&e.length===10?`+971 ${e.slice(1,3)} ${e.slice(3,6)} ${e.slice(6)}`:n}function kr(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}const eo=Qt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[#0A4D68] text-white hover:bg-[#0A4D68]/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-[#088395] bg-background text-[#088395] hover:bg-[#088395] hover:text-white",secondary:"bg-[#05BFDB] text-white hover:bg-[#05BFDB]/90",ghost:"text-[#0A4D68] hover:bg-accent hover:text-accent-foreground",link:"text-[#0A4D68] underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=x.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...a},i)=>{const o=r?gi:"button";return s.jsx(o,{className:D(eo({variant:e,size:t,className:n})),ref:i,...a})});C.displayName="Button";const w=x.forwardRef(({className:n,...e},t)=>s.jsx("div",{ref:t,className:D("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));w.displayName="Card";const j=x.forwardRef(({className:n,...e},t)=>s.jsx("div",{ref:t,className:D("flex flex-col space-y-1.5 p-6",n),...e}));j.displayName="CardHeader";const _=x.forwardRef(({className:n,...e},t)=>s.jsx("h3",{ref:t,className:D("text-2xl font-semibold leading-none tracking-tight",n),...e}));_.displayName="CardTitle";const k=x.forwardRef(({className:n,...e},t)=>s.jsx("p",{ref:t,className:D("text-sm text-muted-foreground",n),...e}));k.displayName="CardDescription";const S=x.forwardRef(({className:n,...e},t)=>s.jsx("div",{ref:t,className:D("p-6 pt-0",n),...e}));S.displayName="CardContent";const to=x.forwardRef(({className:n,...e},t)=>s.jsx("div",{ref:t,className:D("flex items-center p-6 pt-0",n),...e}));to.displayName="CardFooter";function so(){const{user:n,loading:e}=ht(),t=ct();return x.useEffect(()=>{!e&&n&&t("/dashboard")},[n,e,t]),e?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-lynva-gray-50",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 w-32 bg-lynva-gray-100 rounded mb-4"}),s.jsx("div",{className:"h-4 w-48 bg-lynva-gray-100 rounded"})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lynva-gray-50 to-white",children:[s.jsx("section",{className:"relative overflow-hidden",children:s.jsx("div",{className:"container mx-auto px-4 py-20",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-lynva-cyan/10 text-lynva-blue px-4 py-2 rounded-full text-sm font-medium mb-6",children:[s.jsx(Te,{className:"w-4 h-4"}),"AI-Powered Business Communication"]}),s.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-lynva-gray-900 mb-6 leading-tight",children:["Meet ",s.jsx("span",{className:"lynva-gradient bg-clip-text text-transparent",children:"Lynva"}),s.jsx("br",{}),"Your AI Receptionist"]}),s.jsx("p",{className:"text-xl text-lynva-gray-500 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Transform your medical or wellness business with intelligent call handling, automated appointment booking, and seamless WhatsApp communication."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsxs(C,{size:"lg",className:"bg-lynva-blue hover:bg-lynva-blue/90 text-white px-8 py-3 text-lg",onClick:()=>t("/auth/login"),children:["Get Started Today",s.jsx(Hr,{className:"w-5 h-5 ml-2"})]}),s.jsx(C,{variant:"outline",size:"lg",className:"border-lynva-teal text-lynva-teal hover:bg-lynva-teal hover:text-white px-8 py-3 text-lg",children:"Watch Demo"})]})]})})}),s.jsx("section",{className:"py-20 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-lynva-gray-900 mb-4",children:"Everything Your Business Needs"}),s.jsx("p",{className:"text-xl text-lynva-gray-500 max-w-2xl mx-auto",children:"Streamline operations with our comprehensive AI-powered communication suite"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs(w,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs(j,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-lynva-blue/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Te,{className:"w-8 h-8 text-lynva-blue"})}),s.jsx(_,{className:"text-lynva-gray-900",children:"AI Voice Calls"})]}),s.jsx(S,{className:"text-center",children:s.jsx(k,{className:"text-lynva-gray-500",children:"Intelligent call handling with natural conversation flow and intent detection"})})]}),s.jsxs(w,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs(j,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-lynva-teal/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(re,{className:"w-8 h-8 text-lynva-teal"})}),s.jsx(_,{className:"text-lynva-gray-900",children:"Smart Booking"})]}),s.jsx(S,{className:"text-center",children:s.jsx(k,{className:"text-lynva-gray-500",children:"Automated appointment scheduling with Google Calendar integration"})})]}),s.jsxs(w,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs(j,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-lynva-cyan/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Qe,{className:"w-8 h-8 text-lynva-cyan"})}),s.jsx(_,{className:"text-lynva-gray-900",children:"WhatsApp Automation"})]}),s.jsx(S,{className:"text-center",children:s.jsx(k,{className:"text-lynva-gray-500",children:"Automated confirmations, reminders, and customer communication"})})]}),s.jsxs(w,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs(j,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(qt,{className:"w-8 h-8 text-green-600"})}),s.jsx(_,{className:"text-lynva-gray-900",children:"Business Analytics"})]}),s.jsx(S,{className:"text-center",children:s.jsx(k,{className:"text-lynva-gray-500",children:"Real-time insights and analytics to grow your business"})})]})]})]})}),s.jsx("section",{className:"py-20 bg-lynva-gray-50",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-lynva-gray-900 mb-6",children:"Built for UAE Medical & Wellness Businesses"}),s.jsx("p",{className:"text-lg text-lynva-gray-500 mb-8",children:"Lynva understands the unique needs of healthcare providers in the UAE, offering localized solutions that work seamlessly with your existing operations."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ze,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lynva-gray-900",children:"24/7 Availability"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Never miss a call or booking opportunity"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ze,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lynva-gray-900",children:"Multi-language Support"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Arabic and English conversation handling"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ze,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lynva-gray-900",children:"HIPAA Compliant"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Secure handling of sensitive medical information"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ze,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lynva-gray-900",children:"Easy Integration"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Works with your existing systems and workflows"})]})]})]})]}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-lynva-blue rounded-full flex items-center justify-center",children:s.jsx(Te,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-lynva-gray-900",children:"AI Call in Progress"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Patient calling for appointment"})]})]}),s.jsx("div",{className:"bg-lynva-gray-50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-lynva-gray-600 italic",children:`"Hello! I'd like to book a consultation for next week. Do you have any availability on Thursday afternoon?"`})}),s.jsx("div",{className:"bg-lynva-blue/5 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-lynva-blue",children:[s.jsx("strong",{children:"Lynva AI:"}),' "Certainly! I can see we have availability on Thursday. Let me check our schedule for afternoon slots..."']})}),s.jsxs("div",{className:"flex justify-between text-sm text-lynva-gray-500",children:[s.jsx("span",{children:"Duration: 1:23"}),s.jsx("span",{children:"Status: Booking in progress"})]})]})})})]})})}),s.jsx("section",{className:"py-20 lynva-gradient",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Ready to Transform Your Business?"}),s.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Join forward-thinking medical and wellness businesses already using Lynva to improve patient experience and streamline operations."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(C,{size:"lg",variant:"secondary",className:"bg-white text-lynva-blue hover:bg-gray-100 px-8 py-3 text-lg",onClick:()=>t("/auth/login"),children:"Start Free Trial"}),s.jsx(C,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-lynva-blue px-8 py-3 text-lg",children:"Schedule Demo"})]})]})}),s.jsx("footer",{className:"bg-lynva-gray-900 text-white py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"text-2xl font-bold mb-4",children:"Lynva AI Receptionist"}),s.jsx("p",{className:"text-lynva-gray-400 mb-6",children:"Intelligent business communication for the modern world"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:" 2025 Lynva AI. All rights reserved. | Built with  for UAE businesses"})]})})})]})}const B=x.forwardRef(({className:n,type:e,...t},r)=>s.jsx("input",{type:e,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));B.displayName="Input";var ro=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xt=ro.reduce((n,e)=>{const t=pr(`Primitive.${e}`),r=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),no="Label",Sr=x.forwardRef((n,e)=>s.jsx(Xt.label,{...n,ref:e,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||((a=n.onMouseDown)==null||a.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Sr.displayName=no;var Cr=Sr;const ao=Qt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=x.forwardRef(({className:n,...e},t)=>s.jsx(Cr,{ref:t,className:D(ao(),n),...e}));I.displayName=Cr.displayName;function io(){const[n,e]=x.useState(""),[t,r]=x.useState(""),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(""),{signIn:d}=ht(),f=ct(),h=async m=>{if(m.preventDefault(),u(""),!n||!t){u("Please fill in all fields");return}if(!kr(n)){u("Please enter a valid email address");return}l(!0);try{await d(n,t),f("/dashboard")}catch(g){console.error("Login error:",g),u(g.message||"Failed to sign in. Please check your credentials.")}finally{l(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lynva-gray-50 to-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-lynva-blue/10 text-lynva-blue px-4 py-2 rounded-full mb-4",children:[s.jsx(Te,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"Lynva AI Receptionist"})]}),s.jsx("h1",{className:"text-3xl font-bold text-lynva-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Sign in to your business dashboard"})]}),s.jsxs(w,{className:"border-0 shadow-xl",children:[s.jsxs(j,{className:"space-y-1",children:[s.jsx(_,{className:"text-2xl text-center text-lynva-gray-900",children:"Sign In"}),s.jsx(k,{className:"text-center text-lynva-gray-500",children:"Enter your email and password to access your account"})]}),s.jsxs(S,{children:[s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c&&s.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[s.jsx(Ws,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"email",className:"text-lynva-gray-700",children:"Email Address"}),s.jsx(B,{id:"email",type:"email",placeholder:"Enter your email",value:n,onChange:m=>e(m.target.value),className:"lynva-input",disabled:o,autoComplete:"email",autoFocus:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"password",className:"text-lynva-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(B,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:t,onChange:m=>r(m.target.value),className:"lynva-input pr-10",disabled:o,autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-lynva-gray-400 hover:text-lynva-gray-600",disabled:o,children:a?s.jsx(Ct,{className:"w-4 h-4"}):s.jsx(Oe,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{id:"remember",type:"checkbox",className:"w-4 h-4 text-lynva-blue border-lynva-gray-300 rounded focus:ring-lynva-blue"}),s.jsx(I,{htmlFor:"remember",className:"text-sm text-lynva-gray-600",children:"Remember me"})]}),s.jsx(H,{to:"/auth/forgot-password",className:"text-sm text-lynva-blue hover:text-lynva-teal transition-colors",children:"Forgot password?"})]}),s.jsx(C,{type:"submit",className:"w-full bg-lynva-blue hover:bg-lynva-blue/90 text-white py-2.5",disabled:o,children:o?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign In"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-lynva-gray-600",children:["Don't have an account?"," ",s.jsx(H,{to:"/auth/register",className:"text-lynva-blue hover:text-lynva-teal font-medium transition-colors",children:"Sign up for free"})]})})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-xs text-lynva-gray-400",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})})}function oo(){const[n,e]=x.useState(""),[t,r]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(!1),[g,p]=x.useState(""),[y,b]=x.useState(!1),{signUp:P}=ht(),v=ct(),N=async T=>{if(T.preventDefault(),p(""),!n||!t||!a||!o){p("Please fill in all fields");return}if(!kr(n)){p("Please enter a valid email address");return}if(t.length<6){p("Password must be at least 6 characters long");return}if(t!==a){p("Passwords do not match");return}m(!0);try{await P(n,t),b(!0)}catch(O){console.error("Registration error:",O),O.message.includes("already registered")?p("An account with this email already exists. Please sign in instead."):p(O.message||"Failed to create account. Please try again.")}finally{m(!1)}};return y?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lynva-gray-50 to-white flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(w,{className:"border-0 shadow-xl",children:[s.jsxs(j,{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ze,{className:"w-8 h-8 text-green-600"})}),s.jsx(_,{className:"text-2xl text-lynva-gray-900",children:"Check Your Email"}),s.jsxs(k,{className:"text-lynva-gray-500",children:["We've sent a verification link to ",s.jsx("strong",{children:n})]})]}),s.jsx(S,{children:s.jsxs("div",{className:"space-y-4 text-center",children:[s.jsx("p",{className:"text-sm text-lynva-gray-600",children:"Please check your email and click the verification link to activate your account."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{onClick:()=>v("/auth/login"),className:"w-full bg-lynva-blue hover:bg-lynva-blue/90",children:"Go to Sign In"}),s.jsx(C,{variant:"outline",onClick:()=>b(!1),className:"w-full border-lynva-teal text-lynva-teal hover:bg-lynva-teal hover:text-white",children:"Resend Email"})]})]})})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lynva-gray-50 to-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-lynva-blue/10 text-lynva-blue px-4 py-2 rounded-full mb-4",children:[s.jsx(Te,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"Lynva AI Receptionist"})]}),s.jsx("h1",{className:"text-3xl font-bold text-lynva-gray-900 mb-2",children:"Get Started"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Create your business account in minutes"})]}),s.jsxs(w,{className:"border-0 shadow-xl",children:[s.jsxs(j,{className:"space-y-1",children:[s.jsx(_,{className:"text-2xl text-center text-lynva-gray-900",children:"Create Account"}),s.jsx(k,{className:"text-center text-lynva-gray-500",children:"Start your free trial - no credit card required"})]}),s.jsxs(S,{children:[s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[g&&s.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[s.jsx(Ws,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:g})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"businessName",className:"text-lynva-gray-700",children:"Business Name"}),s.jsx(B,{id:"businessName",type:"text",placeholder:"Enter your business name",value:o,onChange:T=>l(T.target.value),className:"lynva-input",disabled:h,autoFocus:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"email",className:"text-lynva-gray-700",children:"Email Address"}),s.jsx(B,{id:"email",type:"email",placeholder:"Enter your email",value:n,onChange:T=>e(T.target.value),className:"lynva-input",disabled:h,autoComplete:"email"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"password",className:"text-lynva-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(B,{id:"password",type:c?"text":"password",placeholder:"Create a password",value:t,onChange:T=>r(T.target.value),className:"lynva-input pr-10",disabled:h,autoComplete:"new-password"}),s.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-lynva-gray-400 hover:text-lynva-gray-600",disabled:h,children:c?s.jsx(Ct,{className:"w-4 h-4"}):s.jsx(Oe,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-lynva-gray-500",children:"Must be at least 6 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(I,{htmlFor:"confirmPassword",className:"text-lynva-gray-700",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(B,{id:"confirmPassword",type:d?"text":"password",placeholder:"Confirm your password",value:a,onChange:T=>i(T.target.value),className:"lynva-input pr-10",disabled:h,autoComplete:"new-password"}),s.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-lynva-gray-400 hover:text-lynva-gray-600",disabled:h,children:d?s.jsx(Ct,{className:"w-4 h-4"}):s.jsx(Oe,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("input",{id:"terms",type:"checkbox",required:!0,className:"w-4 h-4 text-lynva-blue border-lynva-gray-300 rounded focus:ring-lynva-blue mt-0.5"}),s.jsxs(I,{htmlFor:"terms",className:"text-xs text-lynva-gray-600 leading-relaxed",children:["I agree to the"," ",s.jsx(H,{to:"/terms",className:"text-lynva-blue hover:text-lynva-teal",children:"Terms of Service"})," ","and"," ",s.jsx(H,{to:"/privacy",className:"text-lynva-blue hover:text-lynva-teal",children:"Privacy Policy"})]})]}),s.jsx(C,{type:"submit",className:"w-full bg-lynva-blue hover:bg-lynva-blue/90 text-white py-2.5",disabled:h,children:h?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating account..."]}):"Create Account"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-lynva-gray-600",children:["Already have an account?"," ",s.jsx(H,{to:"/auth/login",className:"text-lynva-blue hover:text-lynva-teal font-medium transition-colors",children:"Sign in here"})]})})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-xs text-lynva-gray-400",children:"Free 14-day trial  No setup fees  Cancel anytime"})})]})})}const zs=[{label:"Dashboard",href:"/dashboard",icon:Jr},{label:"Bookings",href:"/dashboard/bookings",icon:re},{label:"Call Logs",href:"/dashboard/calls",icon:Y},{label:"Content",href:"/dashboard/content",icon:Qe},{label:"Services",href:"/dashboard/services",icon:Gs},{label:"Analytics",href:"/dashboard/analytics",icon:qt},{label:"Settings",href:"/dashboard/settings",icon:Kr}];function oe({children:n}){var u,d,f,h;const{user:e,loading:t,signOut:r}=ht(),a=ct(),i=qr(),[o,l]=x.useState(!1);x.useEffect(()=>{!t&&!e&&a("/auth/login")},[e,t,a]);const c=async()=>{try{await r(),a("/")}catch(m){console.error("Sign out error:",m)}};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-lynva-gray-50",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-lynva-blue border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-lynva-gray-600",children:"Loading dashboard..."})]})}):e?s.jsxs("div",{className:"fixed inset-0 bg-lynva-gray-50 overflow-hidden",children:[o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>l(!1)}),s.jsx("div",{className:D("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-lynva-gray-200 shadow-sm transform transition-transform duration-200 ease-in-out lg:translate-x-0",o?"translate-x-0":"-translate-x-full"),children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-lynva-gray-200 bg-gradient-to-r from-lynva-blue/5 to-lynva-teal/5",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-lynva-blue to-lynva-teal rounded-xl flex items-center justify-center shadow-sm",children:s.jsx(Te,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-bold text-lynva-gray-900",children:"Lynva"}),s.jsx("p",{className:"text-xs text-lynva-gray-600 font-medium",children:"AI Receptionist"})]}),s.jsx("button",{onClick:()=>l(!1),className:"p-2 text-lynva-gray-400 hover:text-lynva-gray-600 hover:bg-lynva-gray-100 rounded-lg transition-colors lg:hidden",children:s.jsx(Vr,{className:"w-5 h-5"})})]}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:zs.map(m=>{const g=m.icon,p=i.pathname===m.href;return s.jsxs(H,{to:m.href,onClick:()=>l(!1),className:D("lynva-nav-item",p&&"active"),children:[s.jsx(g,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:m.label}),m.badge&&s.jsx("span",{className:"bg-lynva-cyan text-white text-xs px-2 py-1 rounded-full font-medium",children:m.badge})]},m.href)})}),s.jsx("div",{className:"px-4 py-3 border-t border-lynva-gray-200",children:s.jsxs(H,{to:"/dashboard/help",className:D("lynva-nav-item",i.pathname==="/dashboard/help"&&"active"),onClick:()=>l(!1),children:[s.jsx(Hs,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:"Help & Support"})]})}),s.jsxs("div",{className:"px-4 py-4 border-t border-lynva-gray-200 bg-lynva-gray-50/50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-lynva-blue to-lynva-teal rounded-full flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"text-sm font-bold text-white",children:(u=e.email)==null?void 0:u.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-lynva-gray-900 truncate",children:((d=e.user_metadata)==null?void 0:d.full_name)||"Business Owner"}),s.jsx("p",{className:"text-xs text-lynva-gray-600 truncate",children:e.email})]})]}),s.jsxs(C,{onClick:c,variant:"outline",size:"sm",className:"w-full border-lynva-gray-300 text-lynva-gray-700 hover:bg-white hover:text-lynva-gray-900 transition-colors",children:[s.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})}),s.jsxs("div",{className:"fixed inset-y-0 left-0 lg:left-64 right-0 flex flex-col",children:[s.jsx("header",{className:"bg-white border-b border-lynva-gray-200 px-4 py-4 lg:px-6 shadow-sm z-10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>l(!0),className:"p-2 text-lynva-gray-400 hover:text-lynva-gray-600 hover:bg-lynva-gray-100 rounded-lg transition-colors lg:hidden",children:s.jsx(Yr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-lynva-gray-900",children:((f=zs.find(m=>m.href===i.pathname))==null?void 0:f.label)||"Dashboard"}),s.jsx("p",{className:"text-sm text-lynva-gray-600 hidden sm:block",children:"Welcome back! Here's what's happening with your business."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 rounded-full border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-green-700 hidden sm:inline",children:"AI Active"})]}),s.jsx("div",{className:"lg:hidden",children:s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-lynva-blue to-lynva-teal rounded-full flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"text-sm font-bold text-white",children:(h=e.email)==null?void 0:h.charAt(0).toUpperCase()})})})]})]})}),s.jsx("main",{className:"flex-1 bg-lynva-gray-50 overflow-y-auto",children:n})]})]}):null}function lo(){const[n,e]=x.useState({todayBookings:0,totalCalls:0,totalRevenue:0,conversionRate:0}),[t,r]=x.useState([]),[a,i]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{var h;try{l(!0);const{data:m}=await M.from("businesses").select("id").eq("is_active",!0).limit(1),g=(h=m==null?void 0:m[0])==null?void 0:h.id;if(!g){console.log("No business found");return}await Promise.all([u(g),d(g),f(g)])}catch(m){console.error("Error loading dashboard data:",m)}finally{l(!1)}},u=async h=>{var m;try{const g=new Date().toISOString().split("T")[0],{data:p}=await M.from("bookings").select("id, total_amount").eq("business_id",h).eq("appointment_date",g).eq("status","confirmed"),y=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),{data:b}=await M.from("call_logs").select("id, lead_to_booking").eq("business_id",h).gte("created_at",y),P=(p==null?void 0:p.reduce((O,F)=>O+(F.total_amount||0),0))||0,v=(b==null?void 0:b.length)||0,N=((m=b==null?void 0:b.filter(O=>O.lead_to_booking))==null?void 0:m.length)||0,T=v>0?N/v*100:0;e({todayBookings:(p==null?void 0:p.length)||0,totalCalls:v,totalRevenue:P,conversionRate:T})}catch(g){console.error("Error loading stats:",g)}},d=async h=>{try{const{data:m}=await M.from("bookings").select("id, customer_name, customer_phone, appointment_date, appointment_time, status, total_amount").eq("business_id",h).order("created_at",{ascending:!1}).limit(5);r(m||[])}catch(m){console.error("Error loading recent bookings:",m)}},f=async h=>{try{const{data:m}=await M.from("call_logs").select("id, caller_phone, call_duration_seconds, intent_detected, lead_to_booking, started_at").eq("business_id",h).order("created_at",{ascending:!1}).limit(5);i(m||[])}catch(m){console.error("Error loading recent calls:",m)}};return o?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((h,m)=>s.jsxs(w,{className:"animate-pulse",children:[s.jsx(j,{className:"pb-2",children:s.jsx("div",{className:"h-4 bg-lynva-gray-100 rounded w-3/4"})}),s.jsxs(S,{children:[s.jsx("div",{className:"h-8 bg-lynva-gray-100 rounded w-1/2 mb-2"}),s.jsx("div",{className:"h-3 bg-lynva-gray-100 rounded w-full"})]})]},m))})}):s.jsxs("div",{className:"p-4 lg:p-6 space-y-6 dashboard-content",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(w,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(_,{className:"text-sm font-medium text-lynva-gray-600",children:"Today's Bookings"}),s.jsx(re,{className:"h-4 w-4 text-lynva-blue"})]}),s.jsxs(S,{children:[s.jsx("div",{className:"text-2xl font-bold text-lynva-gray-900",children:n.todayBookings}),s.jsx("p",{className:"text-xs text-lynva-gray-500",children:n.todayBookings>0?"+12% from yesterday":"No bookings yet today"})]})]}),s.jsxs(w,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(_,{className:"text-sm font-medium text-lynva-gray-600",children:"Total Calls"}),s.jsx(Y,{className:"h-4 w-4 text-lynva-teal"})]}),s.jsxs(S,{children:[s.jsx("div",{className:"text-2xl font-bold text-lynva-gray-900",children:n.totalCalls}),s.jsx("p",{className:"text-xs text-lynva-gray-500",children:"This month"})]})]}),s.jsxs(w,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(_,{className:"text-sm font-medium text-lynva-gray-600",children:"Revenue Today"}),s.jsx(dt,{className:"h-4 w-4 text-lynva-cyan"})]}),s.jsxs(S,{children:[s.jsx("div",{className:"text-2xl font-bold text-lynva-gray-900",children:Mt(n.totalRevenue)}),s.jsx("p",{className:"text-xs text-lynva-gray-500",children:n.totalRevenue>0?"+8% from yesterday":"No revenue yet today"})]})]}),s.jsxs(w,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(_,{className:"text-sm font-medium text-lynva-gray-600",children:"Conversion Rate"}),s.jsx(We,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(S,{children:[s.jsxs("div",{className:"text-2xl font-bold text-lynva-gray-900",children:[n.conversionRate.toFixed(1),"%"]}),s.jsx("p",{className:"text-xs text-lynva-gray-500",children:"Calls to bookings"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(w,{className:"border-0 shadow-sm",children:[s.jsx(j,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(_,{className:"text-lynva-gray-900",children:"Recent Bookings"}),s.jsx(k,{className:"text-lynva-gray-500",children:"Latest appointment requests"})]}),s.jsx(C,{asChild:!0,variant:"outline",size:"sm",children:s.jsxs(H,{to:"/dashboard/bookings",children:[s.jsx(Oe,{className:"w-4 h-4 mr-2"}),"View All"]})})]})}),s.jsx(S,{children:t.length>0?s.jsx("div",{className:"space-y-4",children:t.map(h=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-lynva-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-lynva-gray-900",children:h.customer_name}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:h.status})]}),s.jsxs("p",{className:"text-sm text-lynva-gray-500",children:[Bt(h.appointment_date)," at ",Nr(h.appointment_time)]}),s.jsx("p",{className:"text-xs text-lynva-gray-400",children:h.customer_phone})]}),h.total_amount&&s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"font-medium text-lynva-gray-900",children:Mt(h.total_amount)})})]},h.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(re,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lynva-gray-500 mb-4",children:"No bookings yet"}),s.jsx(C,{asChild:!0,size:"sm",children:s.jsxs(H,{to:"/dashboard/bookings",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create Booking"]})})]})})]}),s.jsxs(w,{className:"border-0 shadow-sm",children:[s.jsx(j,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(_,{className:"text-lynva-gray-900",children:"Recent Calls"}),s.jsx(k,{className:"text-lynva-gray-500",children:"Latest AI call interactions"})]}),s.jsx(C,{asChild:!0,variant:"outline",size:"sm",children:s.jsxs(H,{to:"/dashboard/calls",children:[s.jsx(Oe,{className:"w-4 h-4 mr-2"}),"View All"]})})]})}),s.jsx(S,{children:a.length>0?s.jsx("div",{className:"space-y-4",children:a.map(h=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-lynva-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-lynva-gray-900",children:h.caller_phone||"Unknown"}),h.lead_to_booking&&s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Booking"})]}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:h.intent_detected||"General inquiry"}),s.jsx("p",{className:"text-xs text-lynva-gray-400",children:h.started_at?Bt(h.started_at):"Recent"})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center gap-1 text-lynva-gray-500",children:[s.jsx(Ye,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs",children:h.call_duration_seconds?`${Math.floor(h.call_duration_seconds/60)}:${(h.call_duration_seconds%60).toString().padStart(2,"0")}`:"N/A"})]})})]},h.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Y,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lynva-gray-500 mb-4",children:"No calls yet"}),s.jsx("p",{className:"text-sm text-lynva-gray-400",children:"Your AI receptionist will appear here once you start receiving calls"})]})})]})]}),s.jsxs(w,{className:"border-0 shadow-sm",children:[s.jsxs(j,{children:[s.jsx(_,{className:"text-lynva-gray-900",children:"Quick Actions"}),s.jsx(k,{className:"text-lynva-gray-500",children:"Manage your business operations"})]}),s.jsx(S,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(C,{asChild:!0,variant:"outline",className:"h-auto p-4 border-lynva-blue/20 hover:bg-lynva-blue/5",children:s.jsxs(H,{to:"/dashboard/bookings",className:"flex flex-col items-center gap-2",children:[s.jsx(re,{className:"w-8 h-8 text-lynva-blue"}),s.jsx("span",{className:"font-medium",children:"New Booking"}),s.jsx("span",{className:"text-xs text-lynva-gray-500",children:"Create appointment manually"})]})}),s.jsx(C,{asChild:!0,variant:"outline",className:"h-auto p-4 border-lynva-teal/20 hover:bg-lynva-teal/5",children:s.jsxs(H,{to:"/dashboard/content",className:"flex flex-col items-center gap-2",children:[s.jsx(Qe,{className:"w-8 h-8 text-lynva-teal"}),s.jsx("span",{className:"font-medium",children:"Manage FAQs"}),s.jsx("span",{className:"text-xs text-lynva-gray-500",children:"Update AI responses"})]})}),s.jsx(C,{asChild:!0,variant:"outline",className:"h-auto p-4 border-lynva-cyan/20 hover:bg-lynva-cyan/5",children:s.jsxs(H,{to:"/dashboard/settings",className:"flex flex-col items-center gap-2",children:[s.jsx(Xr,{className:"w-8 h-8 text-lynva-cyan"}),s.jsx("span",{className:"font-medium",children:"Settings"}),s.jsx("span",{className:"text-xs text-lynva-gray-500",children:"Configure your AI"})]})})]})})]})]})}const Ar=x.forwardRef(({className:n,...e},t)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:t,className:D("w-full caption-bottom text-sm",n),...e})}));Ar.displayName="Table";const Er=x.forwardRef(({className:n,...e},t)=>s.jsx("thead",{ref:t,className:D("[&_tr]:border-b",n),...e}));Er.displayName="TableHeader";const Pr=x.forwardRef(({className:n,...e},t)=>s.jsx("tbody",{ref:t,className:D("[&_tr:last-child]:border-0",n),...e}));Pr.displayName="TableBody";const co=x.forwardRef(({className:n,...e},t)=>s.jsx("tfoot",{ref:t,className:D("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));co.displayName="TableFooter";const Ft=x.forwardRef(({className:n,...e},t)=>s.jsx("tr",{ref:t,className:D("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Ft.displayName="TableRow";const ce=x.forwardRef(({className:n,...e},t)=>s.jsx("th",{ref:t,className:D("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));ce.displayName="TableHead";const de=x.forwardRef(({className:n,...e},t)=>s.jsx("td",{ref:t,className:D("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));de.displayName="TableCell";function uo(){const[n,e]=x.useState([]),[t,r]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState("all"),[c,u]=x.useState(!1);x.useEffect(()=>{d()},[]);const d=async()=>{var h;try{r(!0);const{data:m}=await M.from("businesses").select("id").eq("is_active",!0).limit(1),g=(h=m==null?void 0:m[0])==null?void 0:h.id;if(!g){console.log("No business found");return}let p=M.from("bookings").select("*").eq("business_id",g).order("appointment_date",{ascending:!1}).order("appointment_time",{ascending:!1});o!=="all"&&(p=p.eq("status",o));const{data:y,error:b}=await p;if(b)throw b;let P=y||[];a&&(P=P.filter(v=>v.customer_name.toLowerCase().includes(a.toLowerCase())||v.customer_phone.includes(a)||v.customer_email&&v.customer_email.toLowerCase().includes(a.toLowerCase()))),e(P)}catch(m){console.error("Error loading bookings:",m)}finally{r(!1)}};x.useEffect(()=>{d()},[o,a]);const f=h=>{const m={confirmed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m[h]||"bg-gray-100 text-gray-800"}`,children:h.charAt(0).toUpperCase()+h.slice(1)})};return t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"h-8 bg-lynva-gray-100 rounded w-48 animate-pulse"}),s.jsx("div",{className:"h-10 bg-lynva-gray-100 rounded w-32 animate-pulse"})]}),s.jsx(w,{children:s.jsx(S,{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((h,m)=>s.jsx("div",{className:"h-16 bg-lynva-gray-100 rounded animate-pulse"},m))})})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Bookings"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Manage your appointment bookings"})]}),s.jsxs(C,{onClick:()=>u(!0),className:"bg-lynva-blue hover:bg-lynva-blue/90",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"New Booking"]})]}),s.jsx(w,{className:"border-0 shadow-sm",children:s.jsx(S,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(I,{htmlFor:"search",className:"text-sm font-medium text-lynva-gray-700",children:"Search"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx(Vs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-lynva-gray-400"}),s.jsx(B,{id:"search",placeholder:"Search by name, phone, or email...",value:a,onChange:h=>i(h.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"sm:w-48",children:[s.jsx(I,{htmlFor:"status",className:"text-sm font-medium text-lynva-gray-700",children:"Status"}),s.jsxs("select",{id:"status",value:o,onChange:h=>l(h.target.value),className:"mt-1 w-full px-3 py-2 border border-lynva-gray-100 rounded-md focus:ring-2 focus:ring-lynva-blue focus:border-lynva-blue",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"completed",children:"Completed"})]})]})]})})}),s.jsxs(w,{className:"border-0 shadow-sm",children:[s.jsx(j,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx(_,{className:"text-lynva-gray-900",children:"All Bookings"}),s.jsxs(k,{className:"text-lynva-gray-500",children:[n.length," booking",n.length!==1?"s":""," found"]})]})})}),s.jsx(S,{children:n.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ar,{children:[s.jsx(Er,{children:s.jsxs(Ft,{children:[s.jsx(ce,{children:"Customer"}),s.jsx(ce,{children:"Contact"}),s.jsx(ce,{children:"Date & Time"}),s.jsx(ce,{children:"Duration"}),s.jsx(ce,{children:"Amount"}),s.jsx(ce,{children:"Status"}),s.jsx(ce,{children:"Actions"})]})}),s.jsx(Pr,{children:n.map(h=>s.jsxs(Ft,{className:"hover:bg-lynva-gray-50",children:[s.jsx(de,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-lynva-gray-900",children:h.customer_name}),h.notes&&s.jsx("div",{className:"text-sm text-lynva-gray-500 truncate max-w-xs",children:h.notes})]})}),s.jsx(de,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Y,{className:"w-3 h-3 text-lynva-gray-400"}),s.jsx("span",{children:Zi(h.customer_phone)})]}),h.customer_email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-lynva-gray-500",children:[s.jsx(zt,{className:"w-3 h-3 text-lynva-gray-400"}),s.jsx("span",{className:"truncate max-w-xs",children:h.customer_email})]})]})}),s.jsx(de,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(re,{className:"w-3 h-3 text-lynva-gray-400"}),s.jsx("span",{children:Bt(h.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-lynva-gray-500",children:[s.jsx(Ye,{className:"w-3 h-3 text-lynva-gray-400"}),s.jsx("span",{children:Nr(h.appointment_time)})]})]})}),s.jsx(de,{children:s.jsxs("span",{className:"text-sm",children:[h.duration_minutes," min"]})}),s.jsx(de,{children:h.total_amount?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dt,{className:"w-3 h-3 text-lynva-gray-400"}),s.jsx("span",{className:"font-medium",children:Mt(h.total_amount,h.currency)})]}):s.jsx("span",{className:"text-lynva-gray-400",children:"-"})}),s.jsx(de,{children:f(h.status)}),s.jsx(de,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{variant:"outline",size:"sm",children:s.jsx(Oe,{className:"w-3 h-3"})}),s.jsx(C,{variant:"outline",size:"sm",children:s.jsx(Zr,{className:"w-3 h-3"})}),s.jsx(C,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:s.jsx(Wt,{className:"w-3 h-3"})})]})})]},h.id))})]})}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(re,{className:"w-16 h-16 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-lynva-gray-900 mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-lynva-gray-500 mb-6",children:a||o!=="all"?"Try adjusting your search or filter criteria":"Your appointment bookings will appear here"}),s.jsxs(C,{onClick:()=>u(!0),className:"bg-lynva-blue hover:bg-lynva-blue/90",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create First Booking"]})]})})]})]})}const ho=Qt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function V({className:n,variant:e,...t}){return s.jsx("div",{className:D(ho({variant:e}),n),...t})}function fo(){const[n,e]=x.useState([]),[t,r]=x.useState(!0);x.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:l}=await M.from("businesses").select("id").limit(1).single();if(l){const{data:c,error:u}=await M.from("call_logs").select("*").eq("business_id",l.id).order("created_at",{ascending:!1}).limit(50);if(u)throw u;e(c||[])}}catch(l){console.error("Error fetching call logs:",l)}finally{r(!1)}},i=l=>{const c=Math.floor(l/60),u=l%60;return`${c}:${u.toString().padStart(2,"0")}`},o=l=>{switch(l==null?void 0:l.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"missed":return"bg-red-100 text-red-800";case"ongoing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return t?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx("div",{className:"w-8 h-8 border-4 border-lynva-blue border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"p-4 lg:p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Call Logs"}),s.jsx("p",{className:"text-lynva-gray-600 mt-1",children:"View and manage incoming call records"})]}),s.jsxs(C,{onClick:a,children:[s.jsx(Y,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Total Calls"}),s.jsx(_,{className:"text-2xl",children:n.length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Completed"}),s.jsx(_,{className:"text-2xl text-green-600",children:n.filter(l=>l.call_status==="completed").length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Missed"}),s.jsx(_,{className:"text-2xl text-red-600",children:n.filter(l=>l.call_status==="missed").length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Avg Duration"}),s.jsx(_,{className:"text-2xl",children:n.length>0?i(Math.round(n.reduce((l,c)=>l+(c.call_duration_seconds||0),0)/n.length)):"0:00"})]})})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Recent Calls"}),s.jsx(k,{children:"Latest incoming calls and their details"})]}),s.jsx(S,{children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Y,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-lynva-gray-900 mb-2",children:"No call logs yet"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Call logs will appear here once you start receiving calls through Vapi."})]}):s.jsx("div",{className:"space-y-4",children:n.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-lynva-gray-100 rounded-lg hover:bg-lynva-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-lynva-blue/10 rounded-full flex items-center justify-center",children:s.jsx(Y,{className:"w-5 h-5 text-lynva-blue"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-lynva-gray-900",children:l.caller_name||"Unknown Caller"}),s.jsx(V,{className:o(l.call_status||"unknown"),children:l.call_status||"Unknown"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-lynva-gray-500 mt-1",children:[s.jsx("span",{children:l.caller_phone||"No phone"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ye,{className:"w-3 h-3"}),l.call_duration_seconds?i(l.call_duration_seconds):"0:00"]}),s.jsx("span",{children:new Date(l.created_at).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[l.intent_detected&&s.jsx(V,{variant:"outline",children:l.intent_detected}),l.transcript&&s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(Qe,{className:"w-4 h-4 mr-2"}),"View Transcript"]})]})]},l.id))})})]})]})}const ft=x.forwardRef(({className:n,...e},t)=>s.jsx("textarea",{className:D("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));ft.displayName="Textarea";function mo(){const[n,e]=x.useState([{id:"1",question:"What are your business hours?",answer:"We are open Monday to Friday from 9 AM to 6 PM, and Saturday from 10 AM to 4 PM.",category:"General",isActive:!0},{id:"2",question:"How do I book an appointment?",answer:"You can book an appointment by calling us directly or through our online booking system.",category:"Booking",isActive:!0},{id:"3",question:"What is your cancellation policy?",answer:"Please provide at least 24 hours notice for cancellations to avoid any fees.",category:"Policy",isActive:!0}]),[t,r]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState({question:"",answer:"",category:"General"}),c=["General","Booking","Services","Policy","Billing"],u=()=>{if(o.question&&o.answer){const m={id:Date.now().toString(),question:o.question,answer:o.answer,category:o.category,isActive:!0};e([...n,m]),l({question:"",answer:"",category:"General"}),r(!1)}},d=m=>{e(n.filter(g=>g.id!==m))},f=m=>{e(n.map(g=>g.id===m?{...g,isActive:!g.isActive}:g))},h=m=>({General:"bg-blue-100 text-blue-800",Booking:"bg-green-100 text-green-800",Services:"bg-purple-100 text-purple-800",Policy:"bg-orange-100 text-orange-800",Billing:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800";return s.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Content Management"}),s.jsx("p",{className:"text-lynva-gray-600 mt-1",children:"Manage FAQ content for your AI receptionist"})]}),s.jsxs(C,{onClick:()=>r(!0),children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add FAQ"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Total FAQs"}),s.jsx(_,{className:"text-2xl",children:n.length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Active FAQs"}),s.jsx(_,{className:"text-2xl text-green-600",children:n.filter(m=>m.isActive).length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Categories"}),s.jsx(_,{className:"text-2xl",children:new Set(n.map(m=>m.category)).size})]})})]}),t&&s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Add New FAQ"}),s.jsx(k,{children:"Create a new frequently asked question"})]}),s.jsxs(S,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Category"}),s.jsx("select",{value:o.category,onChange:m=>l({...o,category:m.target.value}),className:"w-full mt-1 px-3 py-2 border border-lynva-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-lynva-blue",children:c.map(m=>s.jsx("option",{value:m,children:m},m))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Question"}),s.jsx(B,{value:o.question,onChange:m=>l({...o,question:m.target.value}),placeholder:"Enter the question...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Answer"}),s.jsx(ft,{value:o.answer,onChange:m=>l({...o,answer:m.target.value}),placeholder:"Enter the answer...",rows:3,className:"mt-1"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{onClick:u,children:"Add FAQ"}),s.jsx(C,{variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"FAQ Management"}),s.jsx(k,{children:"Manage your frequently asked questions"})]}),s.jsx(S,{children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qe,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-lynva-gray-900 mb-2",children:"No FAQs yet"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Add your first FAQ to get started."})]}):s.jsx("div",{className:"space-y-4",children:n.map(m=>s.jsx("div",{className:`p-4 border rounded-lg ${m.isActive?"border-lynva-gray-200 bg-white":"border-lynva-gray-100 bg-lynva-gray-50"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(V,{className:h(m.category),children:m.category}),s.jsx(V,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"})]}),s.jsx("h3",{className:"font-medium text-lynva-gray-900 mb-2",children:m.question}),s.jsx("p",{className:"text-lynva-gray-600 text-sm",children:m.answer})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(m.id),children:m.isActive?"Deactivate":"Activate"}),s.jsx(C,{variant:"outline",size:"sm",children:s.jsx(Js,{className:"w-4 h-4"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>d(m.id),children:s.jsx(Wt,{className:"w-4 h-4"})})]})]})},m.id))})})]})]})}function go(){const[n,e]=x.useState([]),[t,r]=x.useState(!0),[a,i]=x.useState(!1),[o,l]=x.useState({name:"",description:"",duration_minutes:60,price:0,currency:"USD",category:"General",practitioner_name:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:g}=await M.from("businesses").select("id").limit(1).single();if(g){const{data:p,error:y}=await M.from("services").select("*").eq("business_id",g.id).order("created_at",{ascending:!1});if(y)throw y;e(p||[])}}catch(g){console.error("Error fetching services:",g)}finally{r(!1)}},u=async()=>{if(o.name)try{const{data:g}=await M.from("businesses").select("id").limit(1).single();if(!g){console.error("No business found");return}const{data:p,error:y}=await M.from("services").insert([{...o,business_id:g.id,is_active:!0,booking_buffer_minutes:15,max_advance_booking_days:30}]).select();if(y)throw y;p&&(e([...n,p[0]]),l({name:"",description:"",duration_minutes:60,price:0,currency:"USD",category:"General",practitioner_name:""}),i(!1))}catch(g){console.error("Error adding service:",g)}},d=async g=>{try{const{error:p}=await M.from("services").delete().eq("id",g);if(p)throw p;e(n.filter(y=>y.id!==g))}catch(p){console.error("Error deleting service:",p)}},f=async g=>{const p=n.find(y=>y.id===g);if(p)try{const{error:y}=await M.from("services").update({is_active:!p.is_active}).eq("id",g);if(y)throw y;e(n.map(b=>b.id===g?{...b,is_active:!b.is_active}:b))}catch(y){console.error("Error updating service:",y)}},h=["General","Consultation","Treatment","Therapy","Wellness"],m=g=>({General:"bg-blue-100 text-blue-800",Consultation:"bg-green-100 text-green-800",Treatment:"bg-purple-100 text-purple-800",Therapy:"bg-orange-100 text-orange-800",Wellness:"bg-pink-100 text-pink-800"})[g]||"bg-gray-100 text-gray-800";return t?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx("div",{className:"w-8 h-8 border-4 border-lynva-blue border-t-transparent rounded-full animate-spin"})})}):s.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Services"}),s.jsx("p",{className:"text-lynva-gray-600 mt-1",children:"Manage your business services and pricing"})]}),s.jsxs(C,{onClick:()=>i(!0),children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Service"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Total Services"}),s.jsx(_,{className:"text-2xl",children:n.length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Active Services"}),s.jsx(_,{className:"text-2xl text-green-600",children:n.filter(g=>g.is_active).length})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Avg Duration"}),s.jsxs(_,{className:"text-2xl",children:[n.length>0?Math.round(n.reduce((g,p)=>g+p.duration_minutes,0)/n.length):0," min"]})]})}),s.jsx(w,{children:s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Avg Price"}),s.jsxs(_,{className:"text-2xl",children:["$",n.length>0?Math.round(n.reduce((g,p)=>g+(p.price||0),0)/n.length):0]})]})})]}),a&&s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Add New Service"}),s.jsx(k,{children:"Create a new service for your business"})]}),s.jsxs(S,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Service Name"}),s.jsx(B,{value:o.name,onChange:g=>l({...o,name:g.target.value}),placeholder:"Enter service name...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Category"}),s.jsx("select",{value:o.category,onChange:g=>l({...o,category:g.target.value}),className:"w-full mt-1 px-3 py-2 border border-lynva-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-lynva-blue",children:h.map(g=>s.jsx("option",{value:g,children:g},g))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Description"}),s.jsx(ft,{value:o.description,onChange:g=>l({...o,description:g.target.value}),placeholder:"Enter service description...",rows:3,className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Duration (minutes)"}),s.jsx(B,{type:"number",value:o.duration_minutes,onChange:g=>l({...o,duration_minutes:parseInt(g.target.value)||60}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Price"}),s.jsx(B,{type:"number",value:o.price,onChange:g=>l({...o,price:parseFloat(g.target.value)||0}),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-lynva-gray-700",children:"Practitioner"}),s.jsx(B,{value:o.practitioner_name,onChange:g=>l({...o,practitioner_name:g.target.value}),placeholder:"Practitioner name...",className:"mt-1"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{onClick:u,children:"Add Service"}),s.jsx(C,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Service Management"}),s.jsx(k,{children:"Manage your available services"})]}),s.jsx(S,{children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gs,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-lynva-gray-900 mb-2",children:"No services yet"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Add your first service to get started."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(g=>s.jsx("div",{className:`p-4 border rounded-lg ${g.is_active?"border-lynva-gray-200 bg-white":"border-lynva-gray-100 bg-lynva-gray-50"}`,children:s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(V,{className:m(g.category||"General"),children:g.category||"General"}),s.jsx(V,{variant:g.is_active?"default":"secondary",children:g.is_active?"Active":"Inactive"})]}),s.jsx("h3",{className:"font-medium text-lynva-gray-900 mb-1",children:g.name}),g.description&&s.jsx("p",{className:"text-lynva-gray-600 text-sm mb-2",children:g.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-lynva-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ye,{className:"w-3 h-3"}),g.duration_minutes," min"]}),g.price&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(dt,{className:"w-3 h-3"}),"$",g.price]}),g.practitioner_name&&s.jsx("span",{children:g.practitioner_name})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(g.id),children:g.is_active?"Deactivate":"Activate"}),s.jsx(C,{variant:"outline",size:"sm",children:s.jsx(Js,{className:"w-4 h-4"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>d(g.id),children:s.jsx(Wt,{className:"w-4 h-4"})})]})]})},g.id))})})]})]})}function po(){const[n,e]=x.useState({totalCalls:156,callsThisWeek:23,callsLastWeek:18,totalBookings:89,bookingsThisWeek:12,bookingsLastWeek:8,revenue:4250,conversionRate:57.1,avgCallDuration:245,popularServices:[{name:"Consultation",bookings:34},{name:"Wellness Check",bookings:28},{name:"Treatment",bookings:15},{name:"Therapy",bookings:12}],callsByDay:[{day:"Mon",calls:8},{day:"Tue",calls:12},{day:"Wed",calls:15},{day:"Thu",calls:18},{day:"Fri",calls:22},{day:"Sat",calls:16},{day:"Sun",calls:9}],bookingsByStatus:[{status:"Confirmed",count:45,color:"bg-green-100 text-green-800"},{status:"Pending",count:23,color:"bg-yellow-100 text-yellow-800"},{status:"Completed",count:15,color:"bg-blue-100 text-blue-800"},{status:"Cancelled",count:6,color:"bg-red-100 text-red-800"}]}),[t,r]=x.useState("7d"),a=(c,u)=>{if(u===0)return{percentage:0,isPositive:!0};const d=(c-u)/u*100;return{percentage:Math.abs(d),isPositive:d>=0}},i=a(n.callsThisWeek,n.callsLastWeek),o=a(n.bookingsThisWeek,n.bookingsLastWeek),l=c=>{const u=Math.floor(c/60),d=c%60;return`${u}:${d.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Analytics"}),s.jsx("p",{className:"text-lynva-gray-600 mt-1",children:"Business performance insights and metrics"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{variant:t==="7d"?"default":"outline",size:"sm",onClick:()=>r("7d"),children:"7 Days"}),s.jsx(C,{variant:t==="30d"?"default":"outline",size:"sm",onClick:()=>r("30d"),children:"30 Days"}),s.jsx(C,{variant:t==="90d"?"default":"outline",size:"sm",onClick:()=>r("90d"),children:"90 Days"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"w-4 h-4"}),"Total Calls"]}),s.jsx(_,{className:"text-2xl",children:n.totalCalls})]}),s.jsx(S,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.isPositive?s.jsx(We,{className:"w-4 h-4 text-green-600"}):s.jsx(as,{className:"w-4 h-4 text-red-600"}),s.jsxs("span",{className:i.isPositive?"text-green-600":"text-red-600",children:[i.percentage.toFixed(1),"%"]}),s.jsx("span",{className:"text-lynva-gray-500",children:"vs last week"})]})})]}),s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(re,{className:"w-4 h-4"}),"Total Bookings"]}),s.jsx(_,{className:"text-2xl",children:n.totalBookings})]}),s.jsx(S,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.isPositive?s.jsx(We,{className:"w-4 h-4 text-green-600"}):s.jsx(as,{className:"w-4 h-4 text-red-600"}),s.jsxs("span",{className:o.isPositive?"text-green-600":"text-red-600",children:[o.percentage.toFixed(1),"%"]}),s.jsx("span",{className:"text-lynva-gray-500",children:"vs last week"})]})})]}),s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(dt,{className:"w-4 h-4"}),"Revenue"]}),s.jsxs(_,{className:"text-2xl",children:["$",n.revenue.toLocaleString()]})]}),s.jsx(S,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(We,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-600",children:"12.3%"}),s.jsx("span",{className:"text-lynva-gray-500",children:"vs last month"})]})})]}),s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(qt,{className:"w-4 h-4"}),"Conversion Rate"]}),s.jsxs(_,{className:"text-2xl",children:[n.conversionRate,"%"]})]}),s.jsx(S,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(We,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-600",children:"3.2%"}),s.jsx("span",{className:"text-lynva-gray-500",children:"vs last month"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Calls This Week"}),s.jsx(k,{children:"Daily call volume distribution"})]}),s.jsx(S,{children:s.jsx("div",{className:"space-y-3",children:n.callsByDay.map(c=>{const u=Math.max(...n.callsByDay.map(f=>f.calls)),d=c.calls/u*100;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 text-sm font-medium text-lynva-gray-600",children:c.day}),s.jsx("div",{className:"flex-1 h-6 bg-lynva-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-lynva-blue rounded-full transition-all duration-300",style:{width:`${d}%`}})}),s.jsx("div",{className:"w-8 text-sm font-medium text-lynva-gray-900",children:c.calls})]},c.day)})})})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Booking Status"}),s.jsx(k,{children:"Current booking distribution"})]}),s.jsx(S,{children:s.jsx("div",{className:"space-y-3",children:n.bookingsByStatus.map(c=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(V,{className:c.color,children:c.status})}),s.jsx("div",{className:"text-lg font-semibold text-lynva-gray-900",children:c.count})]},c.status))})})]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Popular Services"}),s.jsx(k,{children:"Most booked services this month"})]}),s.jsx(S,{children:s.jsx("div",{className:"space-y-4",children:n.popularServices.map((c,u)=>{const d=Math.max(...n.popularServices.map(h=>h.bookings)),f=c.bookings/d*100;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-8 h-8 bg-lynva-blue/10 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium text-lynva-blue",children:["#",u+1]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-medium text-lynva-gray-900",children:c.name}),s.jsxs("span",{className:"text-sm font-medium text-lynva-gray-600",children:[c.bookings," bookings"]})]}),s.jsx("div",{className:"h-2 bg-lynva-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-lynva-blue rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]},c.name)})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Average Call Duration"}),s.jsx(_,{className:"text-2xl",children:l(n.avgCallDuration)})]}),s.jsx(S,{children:s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Optimal range: 3-5 minutes"})})]}),s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Peak Hours"}),s.jsx(_,{className:"text-2xl",children:"2-4 PM"})]}),s.jsx(S,{children:s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Highest call volume period"})})]}),s.jsxs(w,{children:[s.jsxs(j,{className:"pb-2",children:[s.jsx(k,{children:"Customer Satisfaction"}),s.jsx(_,{className:"text-2xl",children:"4.8/5"})]}),s.jsx(S,{children:s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Based on post-call surveys"})})]})]})]})}function xo(n,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(n==null||n(a),t===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function yo(n,e=[]){let t=[];function r(i,o){const l=x.createContext(o),c=t.length;t=[...t,o];const u=f=>{var b;const{scope:h,children:m,...g}=f,p=((b=h==null?void 0:h[n])==null?void 0:b[c])||l,y=x.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[n])==null?void 0:p[c])||l,g=x.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=t.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[n])||i;return x.useMemo(()=>({[`__scope${n}`]:{...l,[n]:c}}),[l,c])}};return a.scopeName=n,[r,vo(a,...e)]}function vo(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Tr(n){const e=x.useRef(n);return x.useEffect(()=>{e.current=n}),x.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function bo({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,a]=wo({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,l=Tr(t),c=x.useCallback(u=>{if(i){const f=typeof u=="function"?u(n):u;f!==n&&l(f)}else a(u)},[i,n,a,l]);return[o,c]}function wo({defaultProp:n,onChange:e}){const t=x.useState(n),[r]=t,a=x.useRef(r),i=Tr(e);return x.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),t}function jo(n){const e=x.useRef({value:n,previous:n});return x.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var _o=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{};function No(n){const[e,t]=x.useState(void 0);return _o(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=n.offsetWidth,l=n.offsetHeight;t({width:o,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Zt="Switch",[ko,Fo]=yo(Zt),[So,Co]=ko(Zt),Rr=x.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=n,[h,m]=x.useState(null),g=mi(e,v=>m(v)),p=x.useRef(!1),y=h?d||!!h.closest("form"):!0,[b=!1,P]=bo({prop:a,defaultProp:i,onChange:u});return s.jsxs(So,{scope:t,checked:b,disabled:l,children:[s.jsx(Xt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":$r(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:xo(n.onClick,v=>{P(N=>!N),y&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})}),y&&s.jsx(Ao,{control:h,bubbles:!p.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Rr.displayName=Zt;var Or="SwitchThumb",Ir=x.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,a=Co(Or,t);return s.jsx(Xt.span,{"data-state":$r(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:e})});Ir.displayName=Or;var Ao=n=>{const{control:e,checked:t,bubbles:r=!0,...a}=n,i=x.useRef(null),o=jo(t),l=No(e);return x.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==t&&f){const h=new Event("click",{bubbles:r});f.call(c,t),c.dispatchEvent(h)}},[o,t,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:i,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $r(n){return n?"checked":"unchecked"}var Lr=Rr,Eo=Ir;const ue=x.forwardRef(({className:n,...e},t)=>s.jsx(Lr,{className:D("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:s.jsx(Eo,{className:D("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ue.displayName=Lr.displayName;function Po(){const[n,e]=x.useState({name:"Wellness Center",description:"Professional wellness and therapy services",phone:"+1 (555) 123-4567",email:"contact@wellnesscenter.com",address:"123 Health Street",city:"San Francisco",country:"United States",timezone:"America/Los_Angeles",website:"https://wellnesscenter.com",businessHours:{monday:{open:"09:00",close:"18:00",isOpen:!0},tuesday:{open:"09:00",close:"18:00",isOpen:!0},wednesday:{open:"09:00",close:"18:00",isOpen:!0},thursday:{open:"09:00",close:"18:00",isOpen:!0},friday:{open:"09:00",close:"18:00",isOpen:!0},saturday:{open:"10:00",close:"16:00",isOpen:!0},sunday:{open:"10:00",close:"16:00",isOpen:!1}},notifications:{emailBookings:!0,smsReminders:!0,callAlerts:!0},integrations:{googleCalendar:{enabled:!0,connected:!0},whatsapp:{enabled:!0,connected:!1},vapi:{enabled:!0,connected:!0}}}),[t,r]=x.useState(!1),[a,i]=x.useState(!1),o=(d,f)=>{e(h=>{const m=d.split("."),g=JSON.parse(JSON.stringify(h));let p=g;for(let y=0;y<m.length-1;y++)p=p[m[y]];return p[m[m.length-1]]=f,g}),r(!0)},l=async()=>{i(!0);try{await new Promise(d=>setTimeout(d,1e3)),r(!1)}catch(d){console.error("Error saving settings:",d)}finally{i(!1)}},c=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}],u=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo","Australia/Sydney"];return s.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lynva-gray-900",children:"Settings"}),s.jsx("p",{className:"text-lynva-gray-600 mt-1",children:"Manage your business configuration and preferences"})]}),t&&s.jsxs(C,{onClick:l,disabled:a,children:[s.jsx(en,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"w-5 h-5"}),"Business Information"]}),s.jsx(k,{children:"Basic information about your business"})]}),s.jsxs(S,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(I,{htmlFor:"businessName",children:"Business Name"}),s.jsx(B,{id:"businessName",value:n.name,onChange:d=>o("name",d.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(I,{htmlFor:"website",children:"Website"}),s.jsx(B,{id:"website",value:n.website,onChange:d=>o("website",d.target.value),className:"mt-1"})]})]}),s.jsxs("div",{children:[s.jsx(I,{htmlFor:"description",children:"Description"}),s.jsx(ft,{id:"description",value:n.description,onChange:d=>o("description",d.target.value),rows:3,className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(I,{htmlFor:"phone",children:"Phone Number"}),s.jsx(B,{id:"phone",value:n.phone,onChange:d=>o("phone",d.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(I,{htmlFor:"email",children:"Email Address"}),s.jsx(B,{id:"email",type:"email",value:n.email,onChange:d=>o("email",d.target.value),className:"mt-1"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(I,{htmlFor:"address",children:"Address"}),s.jsx(B,{id:"address",value:n.address,onChange:d=>o("address",d.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(I,{htmlFor:"city",children:"City"}),s.jsx(B,{id:"city",value:n.city,onChange:d=>o("city",d.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(I,{htmlFor:"timezone",children:"Timezone"}),s.jsx("select",{id:"timezone",value:n.timezone,onChange:d=>o("timezone",d.target.value),className:"w-full mt-1 px-3 py-2 border border-lynva-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-lynva-blue",children:u.map(d=>s.jsx("option",{value:d,children:d},d))})]})]})]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"w-5 h-5"}),"Business Hours"]}),s.jsx(k,{children:"Set your operating hours for each day of the week"})]}),s.jsx(S,{children:s.jsx("div",{className:"space-y-4",children:c.map(d=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24",children:s.jsx(I,{className:"text-sm font-medium",children:d.label})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ue,{checked:n.businessHours[d.key].isOpen,onCheckedChange:f=>o(`businessHours.${d.key}.isOpen`,f)}),s.jsx(I,{className:"text-sm",children:"Open"})]}),n.businessHours[d.key].isOpen&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(B,{type:"time",value:n.businessHours[d.key].open,onChange:f=>o(`businessHours.${d.key}.open`,f.target.value),className:"w-32"})}),s.jsx("span",{className:"text-lynva-gray-400",children:"to"}),s.jsx("div",{children:s.jsx(B,{type:"time",value:n.businessHours[d.key].close,onChange:f=>o(`businessHours.${d.key}.close`,f.target.value),className:"w-32"})})]})]},d.key))})})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Notifications"]}),s.jsx(k,{children:"Configure how you want to receive notifications"})]}),s.jsxs(S,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"Email Booking Confirmations"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Receive email when new bookings are made"})]}),s.jsx(ue,{checked:n.notifications.emailBookings,onCheckedChange:d=>o("notifications.emailBookings",d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"SMS Reminders"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Send SMS reminders to customers"})]}),s.jsx(ue,{checked:n.notifications.smsReminders,onCheckedChange:d=>o("notifications.smsReminders",d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"Call Alerts"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Get notified when calls are received"})]}),s.jsx(ue,{checked:n.notifications.callAlerts,onCheckedChange:d=>o("notifications.callAlerts",d)})]})]})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Integrations"}),s.jsx(k,{children:"Manage third-party service connections"})]}),s.jsxs(S,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border border-lynva-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(re,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"Google Calendar"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Sync bookings with Google Calendar"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{className:n.integrations.googleCalendar.connected?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:n.integrations.googleCalendar.connected?"Connected":"Disconnected"}),s.jsx(ue,{checked:n.integrations.googleCalendar.enabled,onCheckedChange:d=>o("integrations.googleCalendar.enabled",d)})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-lynva-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(Y,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"WhatsApp Business"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Send booking confirmations via WhatsApp"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{className:n.integrations.whatsapp.connected?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:n.integrations.whatsapp.connected?"Connected":"Disconnected"}),s.jsx(ue,{checked:n.integrations.whatsapp.enabled,onCheckedChange:d=>o("integrations.whatsapp.enabled",d)})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-lynva-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(Y,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx(I,{className:"font-medium",children:"Vapi AI"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Voice AI for automated phone calls"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{className:n.integrations.vapi.connected?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:n.integrations.vapi.connected?"Connected":"Disconnected"}),s.jsx(ue,{checked:n.integrations.vapi.enabled,onCheckedChange:d=>o("integrations.vapi.enabled",d)})]})]})]})]})]})}function To(){const[n,e]=x.useState(""),[t,r]=x.useState("all"),a=[{id:"1",title:"Getting Started with Lynva AI Receptionist",description:"Learn how to set up your AI receptionist and configure basic settings",category:"Getting Started",readTime:"5 min",popular:!0},{id:"2",title:"Configuring Voice AI Settings",description:"Customize your Vapi voice AI assistant for optimal performance",category:"Voice AI",readTime:"8 min",popular:!0},{id:"3",title:"Managing Bookings and Calendar Integration",description:"Connect Google Calendar and manage appointment bookings",category:"Bookings",readTime:"6 min",popular:!1},{id:"4",title:"Setting Up WhatsApp Notifications",description:"Configure WhatsApp Business API for customer communications",category:"Integrations",readTime:"4 min",popular:!0},{id:"5",title:"Understanding Call Analytics",description:"Learn how to interpret your call logs and analytics data",category:"Analytics",readTime:"7 min",popular:!1},{id:"6",title:"Troubleshooting Common Issues",description:"Solutions to frequently encountered problems",category:"Troubleshooting",readTime:"10 min",popular:!0}],i=["all","Getting Started","Voice AI","Bookings","Integrations","Analytics","Troubleshooting"],o=a.filter(c=>{const u=c.title.toLowerCase().includes(n.toLowerCase())||c.description.toLowerCase().includes(n.toLowerCase()),d=t==="all"||c.category===t;return u&&d}),l=c=>({"Getting Started":"bg-green-100 text-green-800","Voice AI":"bg-purple-100 text-purple-800",Bookings:"bg-blue-100 text-blue-800",Integrations:"bg-orange-100 text-orange-800",Analytics:"bg-cyan-100 text-cyan-800",Troubleshooting:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800";return s.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-lynva-gray-900 mb-2",children:"Help & Support"}),s.jsx("p",{className:"text-lynva-gray-600",children:"Find answers to your questions and get the most out of Lynva"})]}),s.jsx(w,{children:s.jsx(S,{className:"pt-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Vs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-lynva-gray-400 w-4 h-4"}),s.jsx(B,{placeholder:"Search help articles...",value:n,onChange:c=>e(c.target.value),className:"pl-10"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(w,{className:"cursor-pointer hover:shadow-md transition-shadow",children:s.jsxs(S,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(sn,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-lynva-gray-900",children:"Live Chat"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Chat with our support team"})]})]}),s.jsx(C,{variant:"outline",className:"w-full",children:"Start Chat"})]})}),s.jsx(w,{className:"cursor-pointer hover:shadow-md transition-shadow",children:s.jsxs(S,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(zt,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-lynva-gray-900",children:"Email Support"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Send us a detailed message"})]})]}),s.jsx(C,{variant:"outline",className:"w-full",children:"Send Email"})]})}),s.jsx(w,{className:"cursor-pointer hover:shadow-md transition-shadow",children:s.jsxs(S,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(Y,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-lynva-gray-900",children:"Phone Support"}),s.jsx("p",{className:"text-sm text-lynva-gray-500",children:"Call our support hotline"})]})]}),s.jsx(C,{variant:"outline",className:"w-full",children:"Call Now"})]})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(c=>s.jsx(C,{variant:t===c?"default":"outline",size:"sm",onClick:()=>r(c),children:c==="all"?"All Categories":c},c))}),n===""&&t==="all"&&s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(rn,{className:"w-5 h-5"}),"Popular Articles"]}),s.jsx(k,{children:"Most viewed help articles"})]}),s.jsx(S,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.filter(c=>c.popular).map(c=>s.jsxs("div",{className:"p-4 border border-lynva-gray-200 rounded-lg hover:bg-lynva-gray-50 cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx(V,{className:l(c.category),children:c.category}),s.jsx("span",{className:"text-xs text-lynva-gray-500",children:c.readTime})]}),s.jsx("h3",{className:"font-medium text-lynva-gray-900 mb-1",children:c.title}),s.jsx("p",{className:"text-sm text-lynva-gray-600",children:c.description}),s.jsxs("div",{className:"flex items-center gap-1 mt-2 text-lynva-blue hover:text-lynva-blue-dark",children:[s.jsx("span",{className:"text-sm font-medium",children:"Read more"}),s.jsx(is,{className:"w-3 h-3"})]})]},c.id))})})]}),s.jsxs(w,{children:[s.jsxs(j,{children:[s.jsx(_,{children:"Help Articles"}),s.jsxs(k,{children:[o.length," article",o.length!==1?"s":""," found"]})]}),s.jsx(S,{children:o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Hs,{className:"w-12 h-12 text-lynva-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-lynva-gray-900 mb-2",children:"No articles found"}),s.jsx("p",{className:"text-lynva-gray-500",children:"Try adjusting your search or browse by category."})]}):s.jsx("div",{className:"space-y-4",children:o.map(c=>s.jsxs("div",{className:"flex items-start justify-between p-4 border border-lynva-gray-200 rounded-lg hover:bg-lynva-gray-50 cursor-pointer",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(V,{className:l(c.category),children:c.category}),c.popular&&s.jsx(V,{variant:"secondary",children:"Popular"}),s.jsx("span",{className:"text-xs text-lynva-gray-500",children:c.readTime})]}),s.jsx("h3",{className:"font-medium text-lynva-gray-900 mb-1",children:c.title}),s.jsx("p",{className:"text-sm text-lynva-gray-600",children:c.description})]}),s.jsx("div",{className:"ml-4",children:s.jsx(C,{variant:"ghost",size:"sm",children:s.jsx(is,{className:"w-4 h-4"})})})]},c.id))})})]})]})}function Ro(){return s.jsx(fi,{children:s.jsx(zr,{children:s.jsxs(Wr,{children:[s.jsx(J,{path:"/",element:s.jsx(so,{})}),s.jsx(J,{path:"/auth/login",element:s.jsx(io,{})}),s.jsx(J,{path:"/auth/register",element:s.jsx(oo,{})}),s.jsx(J,{path:"/dashboard",element:s.jsx(oe,{children:s.jsx(lo,{})})}),s.jsx(J,{path:"/dashboard/bookings",element:s.jsx(oe,{children:s.jsx(uo,{})})}),s.jsx(J,{path:"/dashboard/calls",element:s.jsx(oe,{children:s.jsx(fo,{})})}),s.jsx(J,{path:"/dashboard/content",element:s.jsx(oe,{children:s.jsx(mo,{})})}),s.jsx(J,{path:"/dashboard/services",element:s.jsx(oe,{children:s.jsx(go,{})})}),s.jsx(J,{path:"/dashboard/analytics",element:s.jsx(oe,{children:s.jsx(po,{})})}),s.jsx(J,{path:"/dashboard/settings",element:s.jsx(oe,{children:s.jsx(Po,{})})}),s.jsx(J,{path:"/dashboard/help",element:s.jsx(oe,{children:s.jsx(To,{})})}),s.jsx(J,{path:"*",element:s.jsx(Gr,{to:"/",replace:!0})})]})})})}const Ur=document.getElementById("root");if(!Ur)throw new Error("Root element not found");ln.createRoot(Ur).render(s.jsx(x.StrictMode,{children:s.jsx(Ro,{})}));
