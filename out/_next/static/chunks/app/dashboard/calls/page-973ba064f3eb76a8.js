(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{6404:function(e,r,n){Promise.resolve().then(n.bind(n,6722))},6490:function(e,r,n){"use strict";n.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(843).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},438:function(e,r,n){"use strict";n.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(843).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5904:function(e,r,n){"use strict";n.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(843).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},6722:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return g}});var t=n(7437),i=n(2265),a=n(5904),s=n(6490),c=n(438),d=n(575),l=n(5671),o=n(3277),u=n(4958),h=n(8681);function g(){let[e,r]=(0,i.useState)([]),[n,g]=(0,i.useState)(!0),{setTitle:x,setSubtitle:f}=(0,h.$)();(0,i.useEffect)(()=>{b(),x("Call Logs"),f("View and manage incoming call records")},[]);let b=async()=>{try{let{data:e}=await u.O.from("businesses").select("id").limit(1).single();if(e){let{data:n,error:t}=await u.O.from("call_logs").select("*").eq("business_id",e.id).order("created_at",{ascending:!1}).limit(50);if(t)throw t;r(n||[])}}catch(e){console.error("Error fetching call logs:",e)}finally{g(!1)}},v=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),m=e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"missed":return"bg-red-100 text-red-800";case"ongoing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})})}):(0,t.jsxs)("div",{className:"p-4 lg:p-4 lg:p-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex items-end justify-end",children:(0,t.jsxs)(d.z,{onClick:b,children:[(0,t.jsx)(a.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.Ol,{className:"pb-2",children:[(0,t.jsx)(l.SZ,{children:"Total Calls"}),(0,t.jsx)(l.ll,{className:"text-2xl",children:e.length})]})}),(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.Ol,{className:"pb-2",children:[(0,t.jsx)(l.SZ,{children:"Completed"}),(0,t.jsx)(l.ll,{className:"text-2xl text-green-600",children:e.filter(e=>"completed"===e.call_status).length})]})}),(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.Ol,{className:"pb-2",children:[(0,t.jsx)(l.SZ,{children:"Missed"}),(0,t.jsx)(l.ll,{className:"text-2xl text-red-600",children:e.filter(e=>"missed"===e.call_status).length})]})}),(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.Ol,{className:"pb-2",children:[(0,t.jsx)(l.SZ,{children:"Avg Duration"}),(0,t.jsx)(l.ll,{className:"text-2xl",children:e.length>0?v(Math.round(e.reduce((e,r)=>e+(r.call_duration_seconds||0),0)/e.length)):"0:00"})]})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsx)(l.ll,{children:"Recent Calls"}),(0,t.jsx)(l.SZ,{children:"Latest incoming calls and their details"})]}),(0,t.jsx)(l.aY,{children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(a.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No call logs yet"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Call logs will appear here once you start receiving calls through Vapi."})]}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-muted rounded-lg hover:bg-muted",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:(0,t.jsx)(a.Z,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-muted-foreground",children:e.caller_name||"Unknown Caller"}),(0,t.jsx)(o.C,{className:m(e.call_status||"unknown"),children:e.call_status||"Unknown"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)("span",{children:e.caller_phone||"No phone"}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(s.Z,{className:"w-3 h-3"}),e.call_duration_seconds?v(e.call_duration_seconds):"0:00"]}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.intent_detected&&(0,t.jsx)(o.C,{variant:"outline",children:e.intent_detected}),e.transcript&&(0,t.jsxs)(d.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"View Transcript"]})]})]},e.id))})})]})]})}},3277:function(e,r,n){"use strict";n.d(r,{C:function(){return d}});var t=n(7437);n(2265);var i=n(9143),a=n(9769),s=n(2169);let c=(0,a.j)("inline-flex items-center justify-center rounded-md border border-zinc-200 px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-zinc-950 focus-visible:ring-zinc-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 transition-[color,box-shadow] overflow-hidden dark:border-zinc-800 dark:focus-visible:border-zinc-300 dark:focus-visible:ring-zinc-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"border-transparent bg-zinc-900 text-zinc-50 [a&]:hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:[a&]:hover:bg-zinc-50/90",secondary:"border-transparent bg-zinc-100 text-zinc-900 [a&]:hover:bg-zinc-100/90 dark:bg-zinc-800 dark:text-zinc-50 dark:[a&]:hover:bg-zinc-800/90",destructive:"border-transparent bg-red-500 text-white [a&]:hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:[a&]:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"text-zinc-950 [a&]:hover:bg-zinc-100 [a&]:hover:text-zinc-900 dark:text-zinc-50 dark:[a&]:hover:bg-zinc-800 dark:[a&]:hover:text-zinc-50"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:n,asChild:a=!1,...d}=e,l=a?i.g7:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,s.cn)(c({variant:n}),r),...d})}},575:function(e,r,n){"use strict";n.d(r,{z:function(){return d}});var t=n(7437);n(2265);var i=n(9143),a=n(9769),s=n(2169);let c=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-zinc-950 focus-visible:ring-zinc-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-zinc-300 dark:focus-visible:ring-zinc-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-primary text-zinc-50 shadow-xs hover:bg-primary/90 dark:bg-primary dark:text-white dark:hover:bg-primary/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-zinc-100 hover:text-zinc-900 dark:bg-zinc-200/30 dark:border-zinc-200 dark:hover:bg-zinc-200/50 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:bg-zinc-800/30 dark:dark:border-zinc-800 dark:dark:hover:bg-zinc-800/50",secondary:"bg-zinc-100 text-zinc-900 shadow-xs hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-100/50 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:hover:bg-zinc-800/50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:r,variant:n,size:a,asChild:d=!1,...l}=e,o=d?i.g7:"button";return(0,t.jsx)(o,{"data-slot":"button",className:(0,s.cn)(c({variant:n,size:a,className:r})),...l})}},5671:function(e,r,n){"use strict";n.d(r,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return a},aY:function(){return l},ll:function(){return c}});var t=n(7437);n(2265);var i=n(2169);function a(e){let{className:r,...n}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-white text-zinc-950 flex flex-col gap-6 rounded-xl border border-zinc-200 py-6 shadow-sm dark:bg-zinc-950 dark:text-zinc-50 dark:border-zinc-800",r),...n})}function s(e){let{className:r,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...n})}function c(e){let{className:r,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",r),...n})}function d(e){let{className:r,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-zinc-500 text-sm dark:text-zinc-400",r),...n})}function l(e){let{className:r,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",r),...n})}},8681:function(e,r,n){"use strict";n.d(r,{$:function(){return c},a:function(){return s}});var t=n(7437),i=n(2265);let a=(0,i.createContext)(void 0);function s(e){let{children:r}=e,[n,s]=(0,i.useState)(""),[c,d]=(0,i.useState)("");return(0,t.jsx)(a.Provider,{value:{title:n,setTitle:s,subtitle:c,setSubtitle:d},children:r})}function c(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useLayout must be used within a LayoutProvider");return e}},4958:function(e,r,n){"use strict";n.d(r,{O:function(){return s}});var t=n(7176);let i="https://placeholder.supabase.co",a="placeholder_anon_key";if(!i||!a)throw Error("Missing Supabase environment variables. Please check your .env file.");let s=(0,t.eI)(i,a)},2169:function(e,r,n){"use strict";n.d(r,{cn:function(){return a},mr:function(){return c},p6:function(){return s},un:function(){return l},vV:function(){return o},xG:function(){return d}});var t=n(3167),i=n(1367);function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,i.m6)((0,t.W)(r))}function s(e){return new Intl.DateTimeFormat("en-AE",{dateStyle:"medium",timeZone:"Asia/Dubai"}).format(new Date(e))}function c(e){let[r,n]=e.split(":"),t=new Date;return t.setHours(parseInt(r),parseInt(n)),new Intl.DateTimeFormat("en-AE",{timeStyle:"short",timeZone:"Asia/Dubai"}).format(t)}function d(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AED";return new Intl.NumberFormat("en-AE",{style:"currency",currency:r}).format(e)}function l(e){let r=e.replace(/\D/g,"");return r.startsWith("971")?"+".concat(r.slice(0,3)," ").concat(r.slice(3,5)," ").concat(r.slice(5,8)," ").concat(r.slice(8)):r.startsWith("0")&&10===r.length?"+971 ".concat(r.slice(1,3)," ").concat(r.slice(3,6)," ").concat(r.slice(6)):e}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}}},function(e){e.O(0,[199,176,971,69,744],function(){return e(e.s=6404)}),_N_E=e.O()}]);