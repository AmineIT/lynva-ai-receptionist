(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6305:function(e,t,s){Promise.resolve().then(s.bind(s,2083))},7307:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6490:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8219:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},438:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5904:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},94:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9733:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(843).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2083:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),r=s(2265),n=s(5671),i=s(575),l=s(7307),c=s(5904),d=s(8219),o=s(9733),x=s(7841),u=s(94),m=s(6490),h=s(438);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,s(843).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var f=s(4958),p=s(2169),y=s(8681),b=s(8792);function v(){let[e,t]=(0,r.useState)({todayBookings:0,totalCalls:0,totalRevenue:0,conversionRate:0}),[s,v]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[k,w]=(0,r.useState)(!0),{setTitle:_,setSubtitle:z}=(0,y.$)();(0,r.useEffect)(()=>{Z(),_("Dashboard"),z("Discover what's happening with your business")},[]);let Z=async()=>{try{var e;w(!0);let{data:t}=await f.O.from("businesses").select("id").eq("is_active",!0).limit(1),s=null==t?void 0:null===(e=t[0])||void 0===e?void 0:e.id;if(!s){console.log("No business found");return}await Promise.all([S(s),C(s),A(s)])}catch(e){console.error("Error loading dashboard data:",e)}finally{w(!1)}},S=async e=>{try{var s;let a=new Date().toISOString().split("T")[0],{data:r}=await f.O.from("bookings").select("id, total_amount").eq("business_id",e).eq("appointment_date",a).eq("status","confirmed"),n=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),{data:i}=await f.O.from("call_logs").select("id, lead_to_booking").eq("business_id",e).gte("created_at",n),l=(null==r?void 0:r.reduce((e,t)=>e+(t.total_amount||0),0))||0,c=(null==i?void 0:i.length)||0,d=(null==i?void 0:null===(s=i.filter(e=>e.lead_to_booking))||void 0===s?void 0:s.length)||0;t({todayBookings:(null==r?void 0:r.length)||0,totalCalls:c,totalRevenue:l,conversionRate:c>0?d/c*100:0})}catch(e){console.error("Error loading stats:",e)}},C=async e=>{try{let{data:t}=await f.O.from("bookings").select("id, customer_name, customer_phone, appointment_date, appointment_time, status, total_amount").eq("business_id",e).order("created_at",{ascending:!1}).limit(5);v(t||[])}catch(e){console.error("Error loading recent bookings:",e)}},A=async e=>{try{let{data:t}=await f.O.from("call_logs").select("id, caller_phone, call_duration_seconds, intent_detected, lead_to_booking, started_at").eq("business_id",e).order("created_at",{ascending:!1}).limit(5);N(t||[])}catch(e){console.error("Error loading recent calls:",e)}};return k?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>(0,a.jsxs)(n.Zb,{className:"animate-pulse",children:[(0,a.jsx)(n.Ol,{className:"pb-2",children:(0,a.jsx)("div",{className:"h-4 bg-gray-100 rounded w-3/4"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-100 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-100 rounded w-full"})]})]},t))})}):(0,a.jsxs)("div",{className:"p-4 lg:p-6 space-y-6 dashboard-content",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-gray-600",children:"Today's Bookings"}),(0,a.jsx)(l.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.todayBookings}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.todayBookings>0?"+12% from yesterday":"No bookings yet today"})]})]}),(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-gray-600",children:"Total Calls"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.totalCalls}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This month"})]})]}),(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-gray-600",children:"Revenue Today"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,p.xG)(e.totalRevenue)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.totalRevenue>0?"+8% from yesterday":"No revenue yet today"})]})]}),(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[e.conversionRate.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Calls to bookings"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ll,{className:"text-gray-900",children:"Recent Bookings"}),(0,a.jsx)(n.SZ,{className:"text-gray-500",children:"Latest appointment requests"})]}),(0,a.jsx)(i.z,{asChild:!0,variant:"outline",size:"sm",children:(0,a.jsxs)(b.default,{href:"/dashboard/bookings",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"View All"]})})]})}),(0,a.jsx)(n.aY,{children:s.length>0?(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.customer_name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,p.p6)(e.appointment_date)," at ",(0,p.mr)(e.appointment_time)]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:e.customer_phone})]}),e.total_amount&&(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(0,p.xG)(e.total_amount)})})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No bookings yet"}),(0,a.jsx)(i.z,{asChild:!0,size:"sm",children:(0,a.jsxs)(b.default,{href:"/dashboard/bookings",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Create Booking"]})})]})})]}),(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ll,{className:"text-gray-900",children:"Recent Calls"}),(0,a.jsx)(n.SZ,{className:"text-gray-500",children:"Latest AI call interactions"})]}),(0,a.jsx)(i.z,{asChild:!0,variant:"outline",size:"sm",children:(0,a.jsxs)(b.default,{href:"/dashboard/calls",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"View All"]})})]})}),(0,a.jsx)(n.aY,{children:j.length>0?(0,a.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.caller_phone||"Unknown"}),e.lead_to_booking&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Booking"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.intent_detected||"General inquiry"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:e.started_at?(0,p.p6)(e.started_at):"Recent"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"text-xs",children:e.call_duration_seconds?"".concat(Math.floor(e.call_duration_seconds/60),":").concat((e.call_duration_seconds%60).toString().padStart(2,"0")):"N/A"})]})})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(c.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No calls yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Your AI receptionist will appear here once you start receiving calls"})]})})]})]}),(0,a.jsxs)(n.Zb,{className:"border",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{className:"text-gray-900",children:"Quick Actions"}),(0,a.jsx)(n.SZ,{className:"text-gray-500",children:"Manage your business operations"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-auto p-4 border-primary/20 hover:bg-primary/5",children:(0,a.jsxs)(b.default,{href:"/dashboard/bookings",className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"New Booking"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Create appointment manually"})]})}),(0,a.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-auto p-4 border-primary/20 hover:bg-primary/5",children:(0,a.jsxs)(b.default,{href:"/dashboard/content",className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"Manage FAQs"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Update AI responses"})]})}),(0,a.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-auto p-4 border-primary/20 hover:bg-primary/5",children:(0,a.jsxs)(b.default,{href:"/dashboard/settings",className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(g,{className:"w-8 h-8 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"Settings"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Configure your AI"})]})})]})})]})]})}},575:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437);s(2265);var r=s(9143),n=s(9769),i=s(2169);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-zinc-950 focus-visible:ring-zinc-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-zinc-300 dark:focus-visible:ring-zinc-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-primary text-zinc-50 shadow-xs hover:bg-primary/90 dark:bg-primary dark:text-white dark:hover:bg-primary/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-zinc-100 hover:text-zinc-900 dark:bg-zinc-200/30 dark:border-zinc-200 dark:hover:bg-zinc-200/50 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:bg-zinc-800/30 dark:dark:border-zinc-800 dark:dark:hover:bg-zinc-800/50",secondary:"bg-zinc-100 text-zinc-900 shadow-xs hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-100/50 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:dark:hover:bg-zinc-800/50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:n,asChild:c=!1,...d}=e,o=c?r.g7:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...d})}},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return l}});var a=s(7437);s(2265);var r=s(2169);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-white text-zinc-950 flex flex-col gap-6 rounded-xl border border-zinc-200 py-6 shadow-sm dark:bg-zinc-950 dark:text-zinc-50 dark:border-zinc-800",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-zinc-500 text-sm dark:text-zinc-400",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},8681:function(e,t,s){"use strict";s.d(t,{$:function(){return l},a:function(){return i}});var a=s(7437),r=s(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)("");return(0,a.jsx)(n.Provider,{value:{title:s,setTitle:i,subtitle:l,setSubtitle:c},children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useLayout must be used within a LayoutProvider");return e}},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var a=s(7176);let r="https://placeholder.supabase.co",n="placeholder_anon_key";if(!r||!n)throw Error("Missing Supabase environment variables. Please check your .env file.");let i=(0,a.eI)(r,n)},2169:function(e,t,s){"use strict";s.d(t,{cn:function(){return n},mr:function(){return l},p6:function(){return i},un:function(){return d},vV:function(){return o},xG:function(){return c}});var a=s(3167),r=s(1367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function i(e){return new Intl.DateTimeFormat("en-AE",{dateStyle:"medium",timeZone:"Asia/Dubai"}).format(new Date(e))}function l(e){let[t,s]=e.split(":"),a=new Date;return a.setHours(parseInt(t),parseInt(s)),new Intl.DateTimeFormat("en-AE",{timeStyle:"short",timeZone:"Asia/Dubai"}).format(a)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AED";return new Intl.NumberFormat("en-AE",{style:"currency",currency:t}).format(e)}function d(e){let t=e.replace(/\D/g,"");return t.startsWith("971")?"+".concat(t.slice(0,3)," ").concat(t.slice(3,5)," ").concat(t.slice(5,8)," ").concat(t.slice(8)):t.startsWith("0")&&10===t.length?"+971 ".concat(t.slice(1,3)," ").concat(t.slice(3,6)," ").concat(t.slice(6)):e}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}}},function(e){e.O(0,[199,176,79,971,69,744],function(){return e(e.s=6305)}),_N_E=e.O()}]);